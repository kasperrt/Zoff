!function(){function e(){$("#facebook-code-link").attr("href","https://www.facebook.com/sharer/sharer.php?u=https://zoff.me/"),$("#facebook-code-link").attr("onclick","window.open('https://www.facebook.com/sharer/sharer.php?u=https://zoff.me/', 'Share Zoff','width=600,height=300'); return false;"),$("#twitter-code-link").attr("href","https://twitter.com/intent/tweet?url=https://zoff.me/&amp;text=Check%20out%20Zoff!&amp;via=zoffmusic"),$("#twitter-code-link").attr("onclick","window.open('https://twitter.com/intent/tweet?url=https://zoff.me/&amp;text=Check%20out%20Zoff!&amp;via=zoffmusic','Share Playlist','width=600,height=300'); return false;"),$("#qr-code-image-link").attr("src","//chart.googleapis.com/chart?chs=150x150&cht=qr&chl=https://zoff.me/&choe=UTF-8&chld=L%7C1")}function t(){var t=new Date;R.blob_list=[],3==t.getMonth()&&1==t.getDate()&&($(".mega").css("-webkit-transform","rotate(180deg)"),$(".mega").css("-moz-transform","rotate(180deg)")),window.onpopstate=function(e){var t=window.location.href.split("/");""!==t[3]&&"#"!=t[3].substring(0,1)&&R.to_channel(t[3],!0)},N=$("#channel-list-container").clone().html(),"fb.zoff.me"!=window.location.hostname&&e(),"zoff.me"==window.location.hostname?add="https://zoff.me":add=window.location.hostname,(void 0===D||q.mobilecheck()||ye)&&(D=io.connect(add+":8080",wt),D.on("update_required",function(){window.location.reload(!0)})),(0===$("#alreadyfp").length||q.mobilecheck()||!D._callbacks.$playlists||ye)&&f(),$("#about").modal(),$("#help").modal(),$("#contact").modal(),$("select").material_select(),q.log("----"),q.log("Sending frontpage_lists"),q.log("Socket",D),q.log("-----"),Y.init(),Y.get_offline()?T(!0,Ze):$("#offline-mode").tooltip({delay:5,position:"bottom",tooltip:"Enable local mode"}),$("#frontpage-viewer-counter").tooltip({delay:5,position:"bottom",tooltip:"Total Viewers"}),D.emit("frontpage_lists",{version:parseInt(localStorage.getItem("VERSION"))}),D.emit("get_userlists",Y.getCookie("_uI")),$("#channel-load").css("display","none"),"#donation"==window.location.hash&&(window.location.hash="#",$("#donation").modal(),$("#donation").modal("open")),localStorage.ok_cookie||(A(),Materialize.toast("We're using cookies to enhance your experience!  <a class='waves-effect waves-light btn light-green' href='#' id='cookieok' style='cursor:pointer;pointer-events:all;'> ok</a>",1e4));var a=0;document.getElementById("zicon").addEventListener("click",function(){a+=10,document.getElementById("zicon").style.paddingLeft=a+"%",a>=100&&(window.location.href="http://etys.no")}),!q.mobilecheck()&&R.winter&&$(".mega").prepend('<div id="snow"></div>'),q.mobilecheck()&&$("input#searchFrontpage").characterCounter(),window.__onGCastApiAvailable=function(e,t){e&&(tt=!0)}}function a(){Qe=0;var e=!0;Z=$("#chan").html(),ct=q.mobilecheck();var t=q.mobilecheck()?"left":"right";if(window.onpopstate=function(e){P()},"fb.zoff.me"!=window.location.hostname&&M(),i="zoff.me"==window.location.hostname?"https://zoff.me":window.location.hostname,void 0!==xt&&(xt.stopInterval=!1),$("ul.playlist-tabs").tabs(),$("ul.playlist-tabs-loggedIn").tabs(),$("ul.chatTabs").tabs(),$("#settings").sideNav({menuWidth:310,edge:t,closeOnClick:!1}),$(".collapsible").collapsible({accordion:!0}),$("#help").modal(),$("#contact").modal(),$("#embed").modal(),$("#delete_song_alert").modal({dismissible:!1}),$("#user_password").modal({dismissible:!1}),I(Ve),lt=$("#temp-results-container"),rt=$("#empty-results-container").html(),Oe=$(".not-imported-container").html(),ze=$(".not-exported-container").html(),$(".not-imported-container").empty(),$(".not-exported-container").empty(),$(".video-container").resizable({start:function(e,t){$("iframe").css("pointer-events","none")},stop:function(e,t){$("iframe").css("pointer-events","auto"),Y.set_width($(this).width()),C()},handles:"e",minWidth:350,maxWidth:$(window).width()-241}),(void 0===D||q.mobilecheck())&&(e=!1,D=io.connect(i+":8080",wt),D.on("update_required",function(){window.location.reload(!0)})),Y.init(),s(),Y.get_offline()&&($(".offline_switch_class")[0].checked=!0,T(!0,Ze)),0===$("#alreadychannel").length||q.mobilecheck())l(),c(),d(),p();else{$("#channel-load").css("display","none"),$("#player").css("opacity","1"),$("#controls").css("opacity","1"),$(".playlist").css("opacity","1"),xt.readyLooks(),St.initYoutubeControls(xt.player),St.initSlider(),xt.player.setVolume(Y.get_volume()),$(".video-container").removeClass("no-opacity");var a="https://remote."+window.location.hostname+"/"+pt;$("#code-text").text(pt),$("#code-qr").attr("src","https://chart.googleapis.com/chart?chs=221x221&cht=qr&choe=UTF-8&chld=L|1&chl="+a),$("#code-link").attr("href",a)}if(e){var i="";oe&&(i=Y.getCookie("_uI")+"_"),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:i+Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})}$("#viewers").tooltip({delay:5,position:"top",tooltip:"Viewers"}),$("#fullscreen").tooltip({delay:5,position:"top",tooltip:"Fullscreen"}),$("#search-btn").tooltip({delay:5,position:"bottom",tooltip:"Search"}),$("#skip").tooltip({delay:5,position:"bottom",tooltip:"Skip"}),$("#shuffle").tooltip({delay:5,position:"bottom",tooltip:"Shuffle"}),$("#settings").tooltip({delay:5,position:"bottom",tooltip:"Settings"}),window.onYouTubeIframeAPIReady=xt.onYouTubeIframeAPIReady,(""===xt.player||void 0===xt.player||q.mobilecheck())&&xt.loadPlayer(),q.mobilecheck()?Ct.initiate_volume():$("input#chan_description").characterCounter(),u(),m(),h(),q.mobilecheck()||0!==$("#alreadychannel").length||y(),q.msieversion()||q.mobilecheck()||Notification.requestPermission(),$(".search_input").focus(),q.sample(),$(".castButton").tooltip({delay:5,position:"top",tooltip:"Cast Zoff to TV"}),$("#results").hover(function(){$("div.result").removeClass("hoverResults"),Te=0},function(){}),$("#search").focus(),$("#embed-button").css("display","inline-block"),$("#embed-area").val(k(Re,je,Ye,Ge)),$("#search").attr("placeholder","Find song on YouTube..."),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||q.mobilecheck()||$(".castButton").css("display","none"),q.log("chromecastAvailable"+Fe),q.log("chromecastAvailable"+tt),Fe?n(1):tt?initializeCastApi():window.__onGCastApiAvailable=function(e,t){e?setTimeout(function(){tt=!0,initializeCastApi()},1e3):tt=!0},$.contextMenu({selector:".playlist-element",reposition:!0,autoHide:!0,items:{copy:{name:"Copy link",callback:function(e,t){var a=$(this[0]).attr("data-video-id"),n="https://www.youtube.com/watch?v="+a;$(".copy_video_id").css("display","block"),$(".copy_video_id").text(n),document.querySelector(".copy_video_id").select(),document.execCommand("copy")?Materialize.toast("Copied!",2e3,"green lighten"):Materialize.toast("Error copying..",2e3,"red lighten"),$(".copy_video_id").css("display","none")}},similar:{name:"Find Similar",callback:function(e,t){var a=$(this[0]).attr("data-video-id");Tt.search(a,!1,!0),q.contains($(".search-container").attr("class").split(" "),"hide")&&Tt.showSearch()}},sep1:"---------",delete:{name:"Delete",callback:function(e,t){var a=$(this[0]).attr("data-video-id");if("suggested"==$(this[0]).attr("data-video-type")){(Qe-=1)<0&&(Qe=0);var n=Qe>9?"9+":Qe;$(".suggested-link span.badge.new.white").hasClass("hide")||0!=n||$(".suggested-link span.badge.new.white").addClass("hide"),$(".suggested-link span.badge.new.white").text(n)}J.vote(a,"del")},disabled:function(e,t){return X}}}}),q.mobilecheck()||null!=navigator.userAgent.match(/iPad/i)||setTimeout(function(){C()},100)}function n(e){if(1==e){$(".castButton").tooltip("remove"),$(".castButton").hasClass("castButton-white-active")||$(".castButton").addClass("castButton-white-active"),$(".castButton").tooltip({delay:5,position:"top",tooltip:"Stop casting"}),$("#duration").toggleClass("hide"),$("#fullscreen").toggleClass("hide");try{xt.player.stopVideo()}catch(e){}xt.stopInterval=!0,$("#player_overlay").removeClass("hide"),$("#player_overlay").css("display","block"),q.mobilecheck()?$("#pause").hasClass("hide")?($("#play").toggleClass("hide"),$("#pause").toggleClass("hide")):$("#play").hasClass("hide")&&($("#play").toggleClass("hide"),$("#pause").toggleClass("hide")):$("#volume").slider("value",100),$("#player_overlay").css("background","url(https://i.ytimg.com/vi/"+ft+"/maxresdefault.jpg)"),$("#player_overlay").css("background-position","center"),$("#player_overlay").css("background-size","100%"),$("#player_overlay").css("background-color","black"),$("#player_overlay").css("background-repeat","no-repeat"),$("#playing_on").css("display","flex"),$("#chromecast_text").html("Playing on<br>"+U.La.friendlyName),xt.player.setVolume(100),$("#player_overlay_text").toggleClass("hide")}else 0==e&&($(".castButton").tooltip("remove"),$(".castButton").removeClass("castButton-white-active"),$(".castButton").tooltip({delay:5,position:"top",tooltip:"Cast Zoff to TV"}),$("#duration").toggleClass("hide"),$("#fullscreen").toggleClass("hide"),xt.player.playVideo(),xt.stopInterval=!1,duration=xt.player.getDuration(),xt.durationSetter(),q.mobilecheck()||(xt.player.setVolume(Y.get_volume()),$("#volume").slider("value",Y.get_volume())),$("#player_overlay").addClass("hide"),$("#player_overlay_text").toggleClass("hide"),$("#chromecast_text").html(""),$("#playing_on").css("display","none"),Ze?xt.loadVideoById(ft):D.emit("pos",{channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}))}function i(e,t){var a=JSON.parse(t);switch(a.type){case-1:Ze?xt.playNext():D.emit("end",{id:a.videoId,channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))});break;case 0:Ze?xt.playNext():D.emit("skip",{error:a.data_code,id:a.videoId,pass:""==re?"":Y.crypt_pass(re),channel:Z.toLowerCase(),userpass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})}}function s(){D.on("auth_required",function(){fe=!0,$("#player_overlay").removeClass("hide"),$("#player_overlay").css("display","block"),$("#user_password").modal("open"),Y.remove_userpass(Z.toLowerCase()),A(),Materialize.toast("That is not the correct password, try again..",4e3)}),D.on("auth_accepted",function(e){e.hasOwnProperty("value")&&e.value&&""!=ge&&(Se=ge,Y.set_userpass(Z.toLowerCase(),Se))})}function o(){D.on("connect_failed",function(){q.log("Connection Failed"),qe||(qe=!0,Materialize.toast("Error connecting to server, please wait..",1e8,"red lighten connect_error"))}),D.on("connect_error",function(){q.log("Connection Failed."),qe||(qe=!0,Materialize.toast("Error connecting to server, please wait..",1e8,"red lighten connect_error"))})}function l(){D.on("np",xt.youtube_listener)}function c(){D.on("get_list",function(){var e="";oe&&(e=Y.getCookie("_uI")+"_"),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:e+Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})})}function d(){D.on("suggested",function(e){var t=!0;void 0===e.id&&(t=!1),It.catchUserSuggests(e,t)})}function p(){D.on("viewers",function(e){ue=e,$("#viewers").html("<i class='material-icons'>visibility</i> "+e),void 0!==_t&&xt.getTitle(_t,ue)})}function u(){D.on("toast",O.toast),D.on("pw",O.pw),D.on("conf",O.conf)}function h(){D.on("chat.all",z.allchat),D.on("chat",z.channelchat)}function m(){D.on("channel",J.channel_function)}function f(){q.log("Setting up playlist_listener"),D.on("playlists",R.frontpage_function)}function y(){D.on("id",G.host_listener)}function v(e){D.on(e,G.host_on_action)}function _(){localStorage.debug=!0}function w(){localStorage.debug=!1}function k(e,t,a,n){return'<iframe src="https://zoff.me/_embed#'+Z.toLowerCase()+"&"+n+e+'" width="'+t+'px" height="'+a+'px"></iframe>'}function C(e){if($(window).width()>760){var t=$(".brand-logo").outerWidth();e&&(t=.15*$(window).width());var a=$(window).width()-$(".control-list").width()-t-66;title_width=a,$(".title-container").width(title_width)}else $(".title-container").width("100%")}function S(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-_",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function T(e,t){if(Y.set_offline(e),Ze=e,D.emit("offline",{status:e,channel:void 0!=Z?Z.toLowerCase():""}),$("#offline-mode").tooltip("remove"),e){if(ee&&(ee=$("<div>"+ee+"</div>"),ee=ee.html()),$("#viewers").addClass("hide"),$("#offline-mode").removeClass("waves-cyan"),$("#offline-mode").addClass("cyan"),$("#offline-mode").tooltip({delay:5,position:"bottom",tooltip:"Disable local mode"}),"/"!=window.location.pathname?($("#controls").on("mouseenter",function(e){$("#seekToDuration").hasClass("hide")&&$("#seekToDuration").removeClass("hide")}),$("#controls").on("mouseleave",function(e){me=!1,$("#seekToDuration").hasClass("hide")||$("#seekToDuration").addClass("hide")}),$("#controls").on("mousedown",function(e){["bar","controls","duration"].indexOf($(e.target).attr("id"))>=0&&(me=!0)}),$("#controls").on("mouseup",function(e){me=!1}),$("#controls").on("mousemove",E),$("#controls").on("click",L),$("#main_components").append("<div id='seekToDuration' class='hide'>00:00/01:00</div>"),q.mobilecheck()?q.mobilecheck()&&$("#seekToDuration").css("top",$("#controls").position().top-20):$("#seekToDuration").css("top",$("#controls").position().top-55),$("#controls").hasClass("ewresize")||$("#controls").addClass("ewresize")):($("#controls").off("mouseenter"),$("#controls").off("mouseleave"),$("#controls").off("mousemove"),$("#controls").off("click")),void 0!=ut&&!t){for(var a=0;a<ut.length;a++)ut[a].votes=0;J.sortList(),J.populate_list(ut)}}else if(ee&&(ee=$("<div>"+ee+"</div>"),ee=ee.html()),$("#viewers").removeClass("hide"),$("#offline-mode").addClass("waves-cyan"),$("#offline-mode").removeClass("cyan"),$("#offline-mode").tooltip({delay:5,position:"bottom",tooltip:"Enable local mode"}),$("#controls").off("mouseleave"),$("#controls").off("mouseenter"),$("#controls").off("mousedown"),$("#controls").off("mouseup"),$("#controls").off("mousemove",E),$("#controls").off("click",L),$("#seekToDuration").remove(),"/"!=window.location.pathname){D.emit("pos",{channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))});var n="";oe&&(n=Y.getCookie("_uI")+"_"),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:n+Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),$("#controls").hasClass("ewresize")&&$("#controls").removeClass("ewresize")}}function I(e){e?(q.log("------------------------"),q.log("Spotify is authenticated"),q.log("access_token: "+De.access_token),q.log("token_type:"+De.token_type),q.log("expires_in: "+De.expires_in),q.log("------------------------"),$(".spotify_authenticated").css("display","block"),$(".spotify_unauthenticated").css("display","none")):(q.log("----------------------------"),q.log("Spotify is not authenticated"),q.log("----------------------------"),$(".spotify_authenticated").css("display","none"),$(".spotify_unauthenticated").css("display","block"))}function E(e){var t=e.clientX-Math.ceil($("#seekToDuration").width()/2)-8;t<0?t=0:t+$("#seekToDuration").width()>$("#controls").width()&&(t=$("#controls").width()-$("#seekToDuration").width()),$("#seekToDuration").css("left",t);try{var a=ut[ut.length-1].duration/$("#controls").width();a*=e.clientX;var n=q.secondsToOther(a),i=q.pad(n[0]),s=q.pad(Math.ceil(n[1]));$("#seekToDuration").text(i+":"+s);["bar","controls","duration"].indexOf($(e.target).attr("id"))>=0&&me&&$("#bar").width(100/xt.player.getDuration()*a+"%")}catch(e){}}function L(e){if(["bar","controls","duration"].indexOf($(e.target).attr("id"))>=0){var t=ut[ut.length-1].duration/$("#controls").width();t*=e.clientX,q.log(t),Fe?U.sendMessage("urn:x-cast:zoff.me",{type:"seekTo",seekTo:t}):(xt.player.seekTo(t),dMinutes=Math.floor(duration/60),dSeconds=duration-60*dMinutes,currDurr=t,currDurr>duration&&(currDurr=duration),minutes=Math.floor(currDurr/60),seconds=currDurr-60*minutes,document.getElementById("duration").innerHTML=q.pad(minutes)+":"+q.pad(seconds)+" <span id='dash'>/</span> "+q.pad(dMinutes)+":"+q.pad(dSeconds),per=100/duration*currDurr,per>=100?per=100:0===duration&&(per=0),$("#bar").width(per+"%"))}}function B(e){search_input=$(".search_input").val(),code=e.keyCode||e.which,40!=code&&38!=code&&13!=code&&39!=code&&37!=code&&17!=code&&16!=code&&225!=code&&18!=code&&27!=code&&(clearTimeout(dt),search_input.length<3&&$("#results").html(""),13==code?Tt.search(search_input):dt=setTimeout(function(){Tt.search(search_input)},1e3))}function M(){$("#facebook-code-link").attr("href","https://www.facebook.com/sharer/sharer.php?u=https://zoff.me/"+Z.toLowerCase()),$("#facebook-code-link").attr("onclick","window.open('https://www.facebook.com/sharer/sharer.php?u=https://zoff.me/"+Z.toLowerCase()+"', 'Share Playlist','width=600,height=300'); return false;"),$("#twitter-code-link").attr("href","https://twitter.com/intent/tweet?url=https://zoff.me/"+Z.toLowerCase()+"&amp;text=Check%20out%20this%20playlist%20"+Z.toLowerCase()+"%20on%20Zoff!&amp;via=zoffmusic"),$("#twitter-code-link").attr("onclick","window.open('https://twitter.com/intent/tweet?url=https://zoff.me/"+Z.toLowerCase()+"/&amp;text=Check%20out%20this%20playlist%20"+Z.toLowerCase()+"%20on%20Zoff!&amp;via=zoffmusic','Share Playlist','width=600,height=300'); return false;"),$("#qr-code-image-link").attr("src","//chart.googleapis.com/chart?chs=150x150&cht=qr&chl=https://zoff.me/"+Z.toLowerCase()+"&choe=UTF-8&chld=L%7C1")}function A(){Materialize.Toast.removeAll()}function P(){var e=window.location.href.split("/");if("#!"==e[3].substr(0,1)||""===e[3]||5==e.length&&"#"==e[4].substr(0,1))""===e[3]&&($.contextMenu("destroy",".playlist-element"),ve=!1,clearTimeout(H),Ce&&(Ce=!1,xt.fireplace.destroy(),$("#fireplace_player").css("display","none")),$("#channel-load").css("display","block"),window.scrollTo(0,0),xt.stopInterval=!0,O.display_logged_out(),O.beginning=!0,xe=!1,Be=!1,$("#embed-button").css("display","none"),$(".castButton").tooltip("remove"),$("#viewers").tooltip("remove"),$("#offline-mode").tooltip("remove"),$("#chan_thumbnail").tooltip("remove"),$("#fullscreen").tooltip("remove"),$("#admin-lock").tooltip("remove"),$("#seekToDuration").remove(),$(".tap-target").tapTarget("close"),clearTimeout(F),$.ajax({url:"/",success:function(e){if(q.mobilecheck()||ye?(q.log("Removing all listeners"),D.removeAllListeners(),D.disconnect()):(D.removeEventListener("chat.all"),D.removeEventListener("chat"),D.removeEventListener("conf"),D.removeEventListener("pw"),D.removeEventListener("toast"),D.removeEventListener("channel")),document.getElementById("volume-button").removeEventListener("click",St.mute_video),document.getElementById("playpause").removeEventListener("click",St.play_pause),document.getElementById("fullscreen").removeEventListener("click",St.fullscreen),(q.mobilecheck()||ye)&&(ft="",_t=""),$("meta[name=theme-color]").attr("content","#2D2D2D"),q.mobilecheck()||ye){try{xt.player.destroy()}catch(e){}xt.player="",document.title="Zoff"}else $(".video-container").resizable("destroy"),$("main").append("<a id='closePlayer' title='Close Player'>X</a>"),$("#playbar").remove(),$("#playlist").remove(),$(".ui-resizable-handle").remove(),$("#main_components").remove(),$("#player").addClass("player_bottom"),$("#main-row").addClass("frontpage_modified_heights"),$("#player").css("opacity","1"),$("#video-container").removeClass("no-opacity"),$("#main-row").prepend("<div id='player_bottom_overlay' title='To Channel' class='player player_bottom'></div>");var a=$("<div>"+e+"</div>");$(".drag-target").remove(),$("#sidenav-overlay").remove(),$("main").attr("class","center-align container"),$("#main-container").removeClass("channelpage"),$("#main-container").attr("style",""),$("header").html($(a.find("header")).html()),$($(a.find(".section.mega"))).insertAfter("header"),$($(a.find(".section.mobile-search"))).insertAfter(".mega"),q.mobilecheck()||ye?$("main").html($(a.find("main")).html()):$("main").append($(a.find("#main_section_frontpage")).wrap("<div>").parent().html()),$(".page-footer").removeClass("padding-bottom-extra"),$(".page-footer").removeClass("padding-bottom-novideo"),$("#favicon").attr("href","/assets/images/favicon.png"),$(".context-menu-list").remove(),q.log(D),1==$("#alreadyfp").length?t():(kt=!0,j=!0,t()),0!==$("#alreadychannel").length||ye?ye&&$("#alreadychannel").remove():$("head").append("<div id='alreadychannel'></div"),$("#channel-load").css("display","none"),ye=!1}}));else{D.emit("change_channel"),O.beginning=!0,Z=e[3].replace("#",""),$("#chan").html(q.upperFirst(Z));var a="";X=!0,oe&&(a=Y.getCookie("_uI")+"_"),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:a+Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})}}var N,D,V,O={beginning:!0,toast:function(e){switch(e){case"suggested_thumbnail":e="The thumbnail has been suggested!";break;case"suggested_description":e="The description has been suggested!";break;case"thumbnail_denied":e="The thumbnail will be denied";break;case"description_denied":e="The description will be denied";break;case"addedsong":e=q.rnd(["I added your song","Your song has been added","Yay, more songs!","Thats a cool song!","I added that song for you","I see you like adding songs..."]);break;case"addedplaylist":e=q.rnd(["I added the playlist","Your playlist has been added","Yay, many more songs!","Thats a cool playlist!","I added all the songs for you","I see you like adding songs.."]),document.getElementById("import").disabled=!1,$("#playlist_loader").addClass("hide"),$("#import").removeClass("hide");break;case"savedsettings":e=q.rnd(["I've saved your settings","I stored all your settings","Your settings have been stored in a safe place"]);break;case"wrongpass":e=q.rnd(["That's not the right password!","Wrong! Better luck next time...","You seem to have mistyped the password","Incorrect. Have you tried meditating?","Nope, wrong password!","Wrong password. The authorities have been notified."]),Y.remove_pass(Z.toLowerCase()),O.display_logged_out(),$("#thumbnail_form").css("display","none"),$("#description_form").css("display","none"),$("#chan_thumbnail").tooltip("remove"),X=!0;break;case"deleted_songs":e="All songs in the channel has been deleted!";break;case"shuffled":e=q.rnd(["♫ You stir me right round, baby. ♫","♫ Stir, stir, stir my boat ♫","I vigorously stirred your playlist!","I hope you like your list stirred, not shaken.","I shuffled your playlist with the cosmic background radiation as a seed. Enjoy.","100% randomized, for your listening pleasure!","I hope you enjoy your fresh playlist!"]);break;case"deletesong":e=q.rnd(["Your song is now in a better place...","You won't be seeing any more of that video...","EXTERMINATE! EXTERMINATE! EXTERMINATE!","I killed it with fire","Thanks for deleting that song. I didn't like it anyways...","Removed song securely."]);break;case"voted":e=q.rnd(["You voted!","You vote like a boss","Voting is the key to democracy","May you get your song to the very top!","I love that song! I vouch for you.","Only you vote that good","I like the way you vote...","Up the video goes!","Voted Zoff for president","Only 999 more to go!"]);break;case"alreadyvoted":e=q.rnd(["You can't vote twice on that song!","I see you have voted on that song before","One vote per person!","I know you want to hear your song, but have patience!","I'm sorry, but I can't let you vote twice, Dave."]);break;case"skip":e=q.rnd(["The song was skipped","I have skipped a song","Skipped to the beat","Skipmaster3000","They see me skippin', they hatin'"]);break;case"listhaspass":e=q.rnd(["I'm sorry, but you have to be an admin to do that!","Only admins can do that","You're not allowed to do that, try logging in!","I can't let you do that","Please log in to do that"]),Y.remove_pass(Z.toLowerCase()),O.display_logged_out(),$("#thumbnail_form").css("display","none"),$("#description_form").css("display","none"),$("#chan_thumbnail").tooltip("remove"),X=!0,$("#playlist_loader").hasClass("hide")||$("#playlist_loader").addClass("hide"),$("#playlist_loader_spotify").hasClass("hide")||$("#playlist_loader_spotify").addClass("hide"),$("#import_spotify").removeClass("hide"),$("#import").removeClass("hide");break;case"noskip":e=q.rnd(["Only Admins can skip songs, peasant!","You have to log in to skip songs on this channel","Try clicking the settings icon and logging in before you skip"]);break;case"alreadyskip":e=q.rnd(["Skipping is democratic, only one vote per person!","More people have to vote to skip, not just you!","Get someone else to skip too! You can't do it on yourself."]);break;case"notyetskip":e="Skipping is disabled the first 10 seconds.";break;case"correctpass":re=void 0==Y.get_pass(Z.toLowerCase())?Y.tmp_pass:Y.get_pass(Z.toLowerCase()),e="Correct password. You now have access to the sacred realm of The Admin.",$("#thumbnail_form").css("display","inline-block"),$("#description_form").css("display","inline-block"),$("#chan_thumbnail").tooltip({delay:5,position:"left",tooltip:"imgur link"});break;case"changedpass":e="Your password has been changed!";break;case"suggested":e="Your song was suggested!";break;case"alreadyplay":e="Seems the song you want is already playing. No fooling the system!"}A(),Materialize.toast(e,4e3)},pw:function(e){X=!1,void 0!=re&&""!=re||(re=Y.get_pass(Z.toLowerCase())),names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle","userpass"],Y.set_pass(Z.toLowerCase(),Y.tmp_pass);for(var t=0;t<names.length;t++)$("input[name="+names[t]+"]").attr("disabled",!1);$(".card-action").removeClass("hide"),$("#admin-lock").addClass("clickable"),$("#admin-lock").html("lock_open"),q.mobilecheck()||$("#admin-lock").tooltip({delay:5,position:"left",tooltip:"Logout"}),$("#password").val(""),$("#password").attr("placeholder","Change admin password"),$(".user-password-li").removeClass("hide"),$(".delete-all").removeClass("hide"),$(".password_protected").prop("checked")&&$(".change_user_pass").removeClass("hide"),q.contains($(".playlist-tabs").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").removeClass("hide"),$(".playlist-tabs").addClass("hide")),"lock_open"!=$("#admin-lock").html()&&($("#admin-lock").addClass("clickable"),$("#admin-lock").html("lock_open"),q.mobilecheck()||$("#admin-lock").tooltip({delay:5,position:"left",tooltip:"Logout"})),J.dragging(!0),$("ul.playlist-tabs-loggedIn").tabs("select_tab",$(".playlist-tabs li a.active").attr("href").substring(1))},conf:function(e){""==e[0].adminpass&&Y.remove_pass(Z.toLowerCase()),O.set_conf(e[0]),""!==e[0].adminpass&&void 0!==Y.get_pass(Z.toLowerCase())&&O.beginning&&""!==Y.get_pass(Z.toLowerCase())&&(D.emit("password",{password:Y.crypt_pass(Y.get_pass(Z.toLowerCase())),channel:Z.toLowerCase()}),O.beginning=!1)},pass_save:function(){X?D.emit("password",{password:Y.crypt_pass(CryptoJS.SHA256(document.getElementById("password").value).toString()),channel:Z.toLowerCase()}):D.emit("password",{password:Y.crypt_pass(CryptoJS.SHA256(document.getElementById("password").value).toString()),channel:Z.toLowerCase(),oldpass:Y.crypt_pass(Y.get_pass(Z.toLowerCase()))})},log_out:function(){A(),Y.get_pass(Z.toLowerCase())?(Y.remove_pass(Z.toLowerCase()),O.display_logged_out(),Materialize.toast("Logged out",4e3)):Materialize.toast("Not logged in",4e3)},display_logged_out:function(){for(X=!0,re="",names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle"],document.getElementById("password").value="",$("#thumbnail_form").css("display","none"),$("#description_form").css("display","none"),Te=0;Te<names.length;Te++)$("input[name="+names[Te]+"]").attr("disabled",!0);"lock"!=$("#admin-lock").html()&&($("#admin-lock").removeClass("clickable"),$("#admin-lock").html("lock"),q.mobilecheck()||$("#admin-lock").tooltip("remove")),$(".user-password-li").hasClass("hide")||$(".user-password-li").addClass("hide"),$(".delete-all").hasClass("hide")||$(".delete-all").addClass("hide"),$(".password_protected").prop("checked")&&$(".change_user_pass").removeClass("hide"),$(".change_user_pass").hasClass("hide")||$(".change_user_pass").addClass("hide"),q.contains($(".playlist-tabs-loggedIn").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").addClass("hide"),$(".playlist-tabs").removeClass("hide")),J.dragging(!1),"#suggestions"==$("ul.playlist-tabs-loggedIn .playlist-tab-links.active").attr("href")?($("ul.playlist-tabs").tabs("select_tab","wrapper"),$("ul.playlist-tabs-loggedIn").tabs("select_tab","wrapper")):$("ul.playlist-tabs").tabs("select_tab",$(".playlist-tabs-loggedIn li a.active").attr("href").substring(1)),$("#admin-lock").removeClass("clickable"),$("#password").attr("placeholder","Enter admin password")},save:function(e){O.submitAdmin(document.getElementById("adminForm").elements,e)},set_conf:function(e){le=e.allvideos,longsongs=e.longsongs,names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle","userpass"],""!==e.adminpass&&X?Q=!0:(Q=!1,q.mobilecheck());for(var t=0;t<names.length;t++)document.getElementsByName(names[t])[0].checked=!0===e[names[t]],$("input[name="+names[t]+"]").attr("disabled",Q);Q?"lock"!=$("#admin-lock").html()&&O.display_logged_out():Q||void 0!==Y.get_pass(Z.toLowerCase())?$(".password_protected").prop("checked")&&$(".change_user_pass").removeClass("hide"):(q.contains($(".playlist-tabs").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").removeClass("hide"),$(".playlist-tabs").addClass("hide")),$("#password").attr("placeholder","Create admin password")),$(".password_protected").prop("checked")||$(".change_user_pass").hasClass("hide")||($(".change_user_pass").addClass("hide"),Y.remove_userpass(Z.toLowerCase())),void 0!=e.thumbnail&&""!=e.thumbnail&&$("#thumbnail_image").html("<img id='thumbnail_image_channel' src='"+e.thumbnail+"' alt='thumbnail' />"),void 0!=e.description&&""!=e.description&&$("#description_area").html(e.description)},submitAdmin:function(e,t){voting=e.vote.checked,addsongs=e.addsongs.checked,longsongs=e.longsongs.checked,j=e.frontpage.checked,allvideos=e.allvideos.checked,removeplay=e.removeplay.checked,skipping=e.skip.checked,shuffling=e.shuffle.checked;var a=""==Se?Se:CryptoJS.SHA256(Se).toString();configs={channel:Z.toLowerCase(),voting:voting,addsongs:addsongs,longsongs:longsongs,frontpage:j,allvideos:allvideos,removeplay:removeplay,adminpass:""==re?"":Y.crypt_pass(re),skipping:skipping,shuffling:shuffling,userpass:Y.crypt_pass(a),userpass_changed:t},Y.set_userpass(Z.toLowerCase(),CryptoJS.SHA256(Se).toString()),D.emit("conf",configs)},hide_settings:function(){$("#settings").sideNav("hide")},shuffle:function(){if(Ze){for(var e=0;e<ut.length;e++){var t=Math.floor(1e6*Math.random());ut[e].added=t}J.sortList(),J.populate_list(ut)}else D.emit("shuffle",{adminpass:void 0!==re?Y.crypt_pass(re):"",channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})},get_admin:function(){return[X,Q]}},z={channel_received:0,all_received:0,chat_help:["/name <new name> to change name","/removename to remove name"],namechange:function(e){D.emit("namechange",e),Y.set_name(e)},removename:function(){D.emit("removename"),Y.remove_name()},chat:function(e){if(!(e.value.length>150)){if(e.value.startsWith("/name "))z.namechange(e.value.substring(6));else if(e.value.startsWith("/help"))if("#all_chat"==$(".chat-tab-li a.active").attr("href")){$("#chatall").children().length>100&&$("#chatall").children()[0].remove();for(var t=0;t<z.chat_help.length;t++){var a=q.intToARGB(q.hashCode("System"));if(a.length<6)for(t=a.length;t<6;t++)a="0"+a;a=q.hexToRgb(a.substring(0,6));var n=q.rgbToHsl([a.r,a.g,a.b],!1);$("#chatall").append("<li title='Zoff''><span style='color:"+n+";'>System</span>: </li>");var i=document.createTextNode(z.chat_help[t]);$("#chatall li:last")[0].appendChild(i),document.getElementById("chatall").scrollTop=document.getElementById("chatall").scrollHeight}}else{$("#chatchannel").children().length>100&&$("#chatchannel").children()[0].remove();for(var t=0;t<z.chat_help.length;t++){var a=q.intToARGB(q.hashCode("System"));if(a.length<6)for(t=a.length;t<6;t++)a="0"+a;a=q.hexToRgb(a.substring(0,6));var n=q.rgbToHsl([a.r,a.g,a.b],!1);$("#chatchannel").append("<li><span style='color:"+n+";'>System</span>: </li>");var i=document.createTextNode(z.chat_help[t]);$("#chatchannel li:last")[0].appendChild(i),document.getElementById("chatchannel").scrollTop=document.getElementById("chatchannel").scrollHeight}}else e.value.startsWith("/removename")?z.removename():"#all_chat"==$(".chat-tab-li a.active").attr("href")?D.emit("all,chat",e.value):D.emit("chat",{channel:Z.toLowerCase(),data:e.value,pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))});e.value=""}},allchat:function(e){if(":"==e.msg.substring(0,1)&&!Me){z.all_received+=1,$("#favicon").attr("href","/assets/images/highlogo.png"),te=!0,Ae=!0,$(".chat-link span.badge.new.white").hasClass("hide")&&$(".chat-link span.badge.new.white").removeClass("hide");var t=z.channel_received+z.all_received>9?"9+":z.channel_received+z.all_received;$(".chat-link span.badge.new.white").html(t)}document.hidden&&$("#favicon").attr("href","/assets/images/highlogo.png"),$("#chatall").children().length>100&&$("#chatall").children()[0].remove();var a=q.intToARGB(q.hashCode(e.from));if(a.length<6)for(x=a.length;x<6;x++)a="0"+a;a=q.hexToRgb(a.substring(0,6));var n=q.rgbToHsl([a.r,a.g,a.b],!1);$("#chatall").append("<li title='"+e.channel+"''><span style='color:"+n+";'>"+e.from+"</span></li>");var i=document.createTextNode(e.msg);$("#chatall li:last")[0].appendChild(i),document.getElementById("chatall").scrollTop=document.getElementById("chatall").scrollHeight},channelchat:function(e){if(":"==e.msg.substring(0,1)&&!Me){$("#favicon").attr("href","/assets/images/highlogo.png"),te=!0,Ae=!0,z.channel_received+=1,$(".chat-link span.badge.new.white").hasClass("hide")&&$(".chat-link span.badge.new.white").removeClass("hide");var t=z.channel_received+z.all_received>9?"9+":z.channel_received+z.all_received;$(".chat-link span.badge.new.white").html(t)}$("#chatchannel").children().length>100&&$("#chatchannel").children()[0].remove();var a=q.intToARGB(q.hashCode(e.from));if(a.length<6)for(x=a.length;x<6;x++)a="0"+a;a=q.hexToRgb(a.substring(0,6));var n=q.rgbToHsl([a.r,a.g,a.b],!1);$("#chatchannel").append("<li><span style='color:"+n+";'>"+e.from+"</span></li>");var i=document.createTextNode(e.msg);$("#chatchannel li:last")[0].appendChild(i),document.getElementById("chatchannel").scrollTop=document.getElementById("chatchannel").scrollHeight},chat_blink:function(){Pe=!0,$(".chat-link").attr("style","color: grey !important;"),setTimeout(function(){$(".chat-link").attr("style","color: white !important;"),setTimeout(function(){Pe&&z.chat_blink()},1e3)},1e3)}},Y={conf_pass:void 0,user_pass:void 0,tmp_pass:"",init:function(){"/"!=window.location.pathname&&("https:"!=location.protocol?document.cookie=Z.toLowerCase()+"=;path=/"+Z.toLowerCase()+";expires="+new Date(0).toUTCString():document.cookie=Z.toLowerCase()+"=;path=/"+Z.toLowerCase()+";secure;expires="+new Date(0).toUTCString());try{conf_arr=Y.decrypt(Y.getCookie("_opt"),"_opt")}catch(e){conf_arr=Y.decrypt(Y.create_cookie("_opt"),"_opt")}if("/"!=window.location.pathname){try{Y.conf_pass=Y.decrypt(Y.getCookie(Z.toLowerCase()),Z.toLowerCase())}catch(e){Y.conf_pass=Y.decrypt(Y.create_cookie(Z.toLowerCase()),Z.toLowerCase())}G.change_enabled(conf_arr.remote),100!=conf_arr.width&&xt.set_width(conf_arr.width),void 0!==conf_arr.name&&""!==conf_arr.name&&z.namechange(conf_arr.name)}},decrypt:function(e,t){void 0===Y.getCookie(t)&&(e=Y.create_cookie(t));var a=btoa("0103060703080703080701")+btoa("0103060703080703080701");a=a.substring(0,32),a=btoa(a);var n=CryptoJS.AES.decrypt(e,a,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return $.parseJSON(n.toString(CryptoJS.enc.Utf8))},decrypt_pass:function(e){var t=btoa(D.id)+btoa(D.id);return t=t.substring(0,32),t=btoa(t),CryptoJS.AES.decrypt(e,t,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)},encrypt:function(e,t){var a=JSON.stringify(e),n=btoa("0103060703080703080701")+btoa("0103060703080703080701");n=n.substring(0,32),n=btoa(n);var i=CryptoJS.AES.encrypt(a,n,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),s=new Date;s.setFullYear(s.getFullYear()+1),"https:"!=location.protocol?document.cookie=t+"="+i.toString()+";expires="+s.toGMTString()+";path=/;":document.cookie=t+"="+i.toString()+";secure;expires="+s.toGMTString()+";path=/;"},get_volume:function(){return Y.decrypt(Y.getCookie("_opt"),"_opt").volume},get_offline:function(){return void 0!=Y.decrypt(Y.getCookie("_opt"),"_opt").offline?Y.decrypt(Y.getCookie("_opt"),"_opt").offline:(Y.set_offline(!1),!1)},set_volume:function(e){conf_arr.volume=e,Y.encrypt(conf_arr,"_opt")},create_cookie:function(e){cookie_object="_opt"==e?{volume:100,width:100,remote:!0,name:"",offline:!1}:{passwords:{}};var t=JSON.stringify(cookie_object),a=btoa("0103060703080703080701")+btoa("0103060703080703080701");a=a.substring(0,32),a=btoa(a);var n=CryptoJS.AES.encrypt(t,a,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),i=new Date;return i.setFullYear(i.getFullYear()+1),"https:"!=location.protocol?document.cookie=e+"="+n.toString()+";expires="+i.toGMTString()+";path=/;":document.cookie=e+"="+n.toString()+";secure;expires="+i.toGMTString()+";path=/;",Y.getCookie(e)},set_pass:function(e,t){Y.conf_pass.passwords[e]=t,Y.encrypt(Y.conf_pass,e)},remove_pass:function(e){delete Y.conf_pass.passwords[e],Y.encrypt(Y.conf_pass,e.toLowerCase())},set_userpass:function(e,t){Y.conf_pass.passwords.userpass=t,Y.encrypt(Y.conf_pass,e)},remove_userpass:function(e){delete Y.conf_pass.passwords.userpass,Y.encrypt(Y.conf_pass,e.toLowerCase())},set_name:function(e){conf_arr.name=encodeURIComponent(e).replace(/\W/g,""),Y.encrypt(conf_arr,"_opt")},set_offline:function(e){conf_arr.offline=e,Y.encrypt(conf_arr,"_opt")},remove_name:function(){conf_arr.name="",Y.encrypt(conf_arr,"_opt")},get_pass:function(e){if(void 0!==Y.conf_pass)return Y.conf_pass.passwords[e]},get_userpass:function(e){return void 0!==Y.conf_pass?Y.conf_pass.passwords.userpass:""},set_remote:function(e){conf_arr.remote=e,Y.encrypt(conf_arr,"_opt")},get_remote:function(e){return conf_arr.remote},crypt_pass:function(e){Y.tmp_pass=e;var t=btoa(D.id)+btoa(D.id);t=t.substring(0,32),t=btoa(t);var a=btoa(Y.makeiv()),n=CryptoJS.AES.encrypt(e,CryptoJS.enc.Base64.parse(t),{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7,iv:CryptoJS.enc.Base64.parse(a)});return window.encrypted=n,n.toString()+"$"+a},makeiv:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<16;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},get_width:function(){return conf_arr.width},set_width:function(e){conf_arr.width=e,Y.encrypt(conf_arr,"_opt")},getCookie:function(e){var t="; "+document.cookie,a=t.split("; "+e+"=");if(2==a.length)return a.pop().split(";").shift()}},j=!0,R={blob_list:[],winter:(new Date).getMonth()>=10,times_rotated:0,all_channels:[],frontpage_function:function(e){j=!0,q.log("-----------"),q.log("Frontpage fetch"),q.log(e),q.log("------------"),R.all_channels=e.channels,R.populate_channels(e.channels,!0),R.set_viewers(e.viewers)},populate_channels:function(e,t){$("#channels").empty();for(var a,n=0,i=0;i<e.length;i++)e[i].hasOwnProperty("viewers")||(e[i].viewers=0),e[i].hasOwnProperty("pinned")||(e[i].pinned=0),e[i].hasOwnProperty("count")&&0!=e[i].count||delete e[i];e=t?e.sort(q.predicate({name:"pinned",reverse:!0},{name:"viewers",reverse:!0},{name:"accessed",reverse:!0},{name:"count",reverse:!0})):e.sort(q.predicate({name:"pinned",reverse:!0},{name:"viewers",reverse:!0},{name:"count",reverse:!0})),void 0!==a&&e.unshift(a),q.mobilecheck()||(clearTimeout(V),R.add_backdrop(e,0)),pre_card=$(N),q.log("------------"),q.log(pre_card),q.log("-------------");for(var s in e){var o=e[s]._id;if(n<12||!t){var l=e[s].id,r=e[s].viewers,c=e[s].description,d="background-image:url('https://img.youtube.com/vi/"+l+"/hqdefault.jpg');";e[s].thumbnail&&(d="background-image:url('"+e[s].thumbnail+"');");var p=e[s].count,u=pre_card.clone();1==e[s].pinned?(u.find(".pin").attr("style","display:block;"),u.find(".card").attr("title","Pinned!")):(u.find(".pin").attr("style","display:none;"),u.find(".card").attr("title","")),u.find(".chan-name").text(o),u.find(".chan-name").attr("title",o),u.find(".chan-views").text(r),u.find(".chan-songs").text(p),u.find(".chan-bg").attr("style",d),u.find(".chan-link").attr("href",o+"/"),""==c||void 0==c||q.mobilecheck()?(u.find(".card-reveal").remove(),u.find(".card").removeClass("sticky-action")):(u.find(".card-title").text(o),u.find(".description_text").text(c),c=""),$("#channels").append(u.html())}n++}var g=e.slice();g=g.sort(R.sortFunction_active);var h={};for(var s in g)h[g[s].channel]=null;var m="input.desktop-search";q.mobilecheck()&&(m="input.mobile-search"),$(m).autocomplete({data:h,limit:5,onAutocomplete:function(e){R.to_channel(e,!1)}}),document.getElementById("preloader").style.display="none",$("#channels").fadeIn(800),$("#searchFrontpage").focus(),n=0},sortFunction:function(e,t){var a=e.viewers,n=t.viewers,i=e.count,s=t.count;return a<n?1:a>n?-1:i<s?1:i>s?-1:0},sortFunction_active:function(e,t){var a=e.accessed,n=t.accessed,i=e.count,s=t.count;return a<n?1:a>n?-1:i<s?1:i>s?-1:0},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},add_backdrop:function(e,t){(t>=e.length||t>=20)&&(t=0);var a=e[t].id;if(void 0!==R.blob_list[t])setTimeout(function(){j&&($("#mega-background").css("background","url(data:image/png;base64,"+R.blob_list[t]+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$(".desktop-search").attr("placeholder",e[t].channel))},500);else{var n=new Image;n.src="/assets/images/thumbnails/"+a+".jpg",n.onerror=function(){$.ajax({type:"POST",data:{id:a},url:"/api/imageblob",success:function(a){setTimeout(function(){$("#mega-background").css("background","url(/assets/images/thumbnails/"+a+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$(".desktop-search").attr("placeholder",e[t].channel)},500)}})},n.onload=function(){$("#mega-background").css("background","url("+n.src+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$(".desktop-search").attr("placeholder",e[t].channel)}}V=setTimeout(function(){50==R.times_rotated&&j?(R.times_rotated=0,t=0,D.emit("frontpage_lists",{version:parseInt(localStorage.getItem("VERSION"))}),D.emit("get_userlists",Y.getCookie("_uI"))):j&&(R.times_rotated+=1,R.add_backdrop(e,t+1))},6e3)},start_snowfall:function(){setTimeout(function(){var e=Math.floor(Math.random()*window.innerWidth+1),t=document.createElement("div"),a=document.getElementsByClassName("mega")[0];t.className="snow",t.style.left=e+"px",t.style.top="0px",a.appendChild(t),R.fall_snow(t),R.start_snowfall()},800)},fall_snow:function(e){e.style.top=parseInt(e.style.top.replace("px",""))+2+"px",parseInt(e.style.top.replace("px",""))<document.getElementById("mega-background").offsetHeight-2.5?setTimeout(function(){R.fall_snow(e)},50):e.remove()},set_viewers:function(e){$("#frontpage-viewer-counter").html("<i class='material-icons frontpage-viewers'>visibility</i>"+e)},to_channel:function(e,t){$("#channel-load").css("display","block"),window.scrollTo(0,0),j=!1,e=e.toLowerCase(),clearTimeout(V),q.mobilecheck()&&(q.log("removing all listeners"),D.removeAllListeners()),$("#main-container").css("background-color","#2d2d2d"),$("#frontpage-viewer-counter").tooltip("remove"),$("#offline-mode").tooltip("remove"),$e=1,$.ajax({url:"/"+e,method:"get",data:{channel:e},success:function(n){""!==xt.player&&D.emit("change_channel",{channel:Z.toLowerCase()}),$("#frontpage_player").empty(),q.mobilecheck()&&(q.log("disconnecting"),D.disconnect()),t||(window.history.pushState("to the channel!","Title","/"+e),""==Ke&&(Ke=e),""==et&&(et=e),window.chan=e);var i=$("<div>"+n+"</div>");$("select").material_select("destroy"),$(".mega").remove(),$(".mobile-search").remove(),$("main").attr("class","container center-align main"),$("#main-container").addClass("channelpage"),$("header").html($(i.find("header")).html()),0===$("#alreadychannel").length||q.mobilecheck()||void 0===xt.player?$("main").html($(i.find("main")).html()):($("#main-row").append($(i.find("#playlist").wrap("<div>").parent().html())),$("#video-container").append($(i.find("#main_components").wrap("<div>").parent().html())),$("#main-row").append("<div id='playbar'></div>"),$("#player").removeClass("player_bottom"),$("#main-row").removeClass("frontpage_modified_heights"),$("#main_section_frontpage").remove(),$("#closePlayer").remove(),$("#player_bottom_overlay").remove()),$("#search").attr("placeholder","Find song on YouTube..."),$(".page-footer").addClass("padding-bottom-novideo"),Ne=!0,1==$("#alreadychannel").length?a():(bt=!0,a()),0===$("#alreadyfp").length&&$("head").append("<div id='alreadyfp'></div>")}})}};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var q={log:function(e){"true"===localStorage.debug&&console.log(e)},rnd:function(e){return e[Math.floor(Math.random()*e.length)]},mobilecheck:function(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e},predicate:function(){for(var e,t,a,n=[],i=arguments.length,s=function(e,t){return e===t?0:e<t?-1:1},o=function(e,t){var a=s,n=s;return e&&(n=function(t,n){return a(e(t),e(n))}),t?function(e,t){return-1*n(e,t)}:n},l=0;l<i;l++)e=arguments[l],"string"==typeof e?(t=e,a=s):(t=e.name,a=o(e.primer,e.reverse)),n.push({name:t,cmp:a});return function(t,a){for(var s,o,l=0;l<i&&(o=0,e=n[l],s=e.name,0===(o=e.cmp(t[s],a[s])));l++);return o}},hashCode:function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return t},intToARGB:function(e){return(e>>24&255).toString(16)+(e>>16&255).toString(16)+(e>>8&255).toString(16)+(255&e).toString(16)},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},hslToRgb:function(e,t,a){function n(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}var i,s,o;if(0==t)i=s=o=a;else{var l=a<.5?a*(1+t):a+t-a*t,r=2*a-l;i=n(r,l,e+1/3),s=n(r,l,e),o=n(r,l,e-1/3)}return[255*i,255*s,255*o]},pad:function(e){return e<10?"0"+Math.floor(e):Math.floor(e)},contains:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1},sample:function(){Date.now()-ke>=2*be&&(D.removeAllListeners(),D.disconnect(),D.connect(),xt.setup_all_listeners()),ke=Date.now(),setTimeout(q.sample,be)},loadjsfile:function(e){if(-1==de.indexOf("["+e+"]")){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(t),de+="["+e+"]"}},msieversion:function(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e))+e},secondsToOther:function(e){var t=e,a=Math.floor(t/60);return t-=60*a,[a,t]},rgbToHsl:function(e,t){r=e[0],g=e[1],b=e[2],r/=255,g/=255,b/=255;var a,n,i=Math.max(r,g,b),s=Math.min(r,g,b),o=(i+s)/2;if(i==s)a=n=0;else{var l=i-s;switch(n=o>.5?l/(2-i-s):l/(i+s),i){case r:a=(g-b)/l+(g<b?6:0);break;case g:a=(b-r)/l+2;break;case b:a=(r-g)/l+4}a/=6}return o>.5&&t?o=.4:o<.65&&!t&&(o=.65),"hsl("+Math.floor(360*a)+", "+Math.floor(100*n)+"%, "+Math.floor(100*o)+"%)"},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,a){return"#"+q.componentToHex(e)+q.componentToHex(t)+q.componentToHex(a)},upperFirst:function(e){return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()},addClass:function(e,t){q.contains($(e).attr("class").split(" "),t)||$(e).addClass(t)},send_mail:function(e,t){""!==e&&""!==t&&($("#submit-contact-form").addClass("hide"),$("#send-loader").removeClass("hide"),$("#contact-form-from").attr("disabled","true"),$("#contact-form-message").attr("disabled","true"),$.ajax({type:"POST",data:{from:e,message:t},url:"/api/mail",success:function(e){"success"==e?($("#contact-container").empty(),$("#contact-container").html("Mail has been sent, we'll be back with you shortly.")):($("#contact-container").empty(),$("#contact-container").html("Something went wrong, sorry about that. You could instead try with your own mail-client: <a title='Open in client' href='mailto:contact@zoff.no?Subject=Contact%20Zoff'>contact@zoff.no</a>"))}}))},firstY:null,lastY:null,currentY:null,vertScroll:!1,initAdjustment:0,touchstart:function(e){q.lastY=q.currentY=q.firstY=e.originalEvent.touches[0].pageY},touchmove:function(e){q.currentY=e.originalEvent.touches[0].pageY;var t=q.lastY-q.currentY;!q.vertScroll&&Math.abs(q.currentY-q.firstY)>30&&(q.vertScroll=!0,q.initAdjustment=q.currentY-q.firstY),q.vertScroll&&(window.scrollBy(0,t+q.initAdjustment),q.lastY=q.currentY+t)},touchend:function(e){q.vertScroll=!1,q.firstY=null,q.currentY=null,q.vertScroll=!1,q.initAdjustment=0,q.currentY=null},invertColor:function(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");var t=(255-parseInt(e.slice(0,2),16)).toString(16),a=(255-parseInt(e.slice(2,4),16)).toString(16),n=(255-parseInt(e.slice(4,6),16)).toString(16);return"#"+padZero(t)+padZero(a)+padZero(n)},padZero:function(e,t){return t=t||2,(new Array(t).join("0")+e).slice(-t)}};Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t};var U,H,F,G={enabled:!0,old_id:null,host_listener:function(e){null===G.old_id?G.old_id=e:(D.removeAllListeners(e),xe=!1,G.old_id=e),Ee&&window.parentWindow&&window.parentOrigin&&window.parentWindow.postMessage({type:"controller",id:e},window.parentOrigin);var t="https://remote."+window.location.hostname+"/"+e;$("#code-text").text(e),$("#code-qr").attr("src","https://chart.googleapis.com/chart?chs=221x221&cht=qr&choe=UTF-8&chld=L|1&chl="+t),$("#code-link").attr("href",t),xe||(xe=!0,v(e))},host_on_action:function(e){if(enabled)if("volume"==e.type)$("#volume").slider("value",e.value),xt.player.setVolume(e.value),localStorage.setItem("volume",e.value),St.choose_button(e.value,!1);else if("channel"==e.type){D.emit("change_channel"),O.beginning=!0,Z=e.value.toLowerCase(),$("#chan").html(q.upperFirst(Z)),X=!0;var t="";oe&&(t=Y.getCookie("_uI")+"_"),D.emit("list",{channel:t+Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),window.history.pushState("object or string","Title","/"+Z.toLowerCase())}else"pause"==e.type?xt.pauseVideo():"play"==e.type?xt.playVideo():"skip"==e.type&&J.skip()},change_enabled:function(e){enabled=e,$(".remote_switch_class").prop("checked",enabled)}},J={empty:!1,page:0,can_fit:Math.round($("#wrapper").height()/71),element_height:$("#wrapper").height()/Math.round($("#wrapper").height()/71)-25,uris:[],not_found:[],num_songs:0,dragging:function(e){if(e){if(q.mobilecheck()){var t=$(".list-song");try{$(".list-song").draggable("destroy")}catch(e){}t.off("touchstart",q.touchstart),t.off("touchmove",q.touchmove),t.off("touchend",q.touchend),$(".list-song").draggable({axis:"x",containment:[-60,0,10,0],scroll:!0,drag:function(e,t){if(q.vertScroll)return!1;t.offset.left<=-10?t.position.left=t.offset.left:t.position.left=0},stop:function(e,t){if(-50!=t.offset.left||q.vertScroll){var a=this;$(this).addClass("side_away"),$(this).css("left","0px"),setTimeout(function(){$(a).removeClass("side_away")},300)}else{try{navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&navigator.vibrate(100)}catch(e){}$(".accept-delete").attr("data-video-id",$(this).attr("data-video-id")),$("#delete_song_title").html($(this).find(".list-title").html()),$("#delete_song_alert").modal("open");var a=this;$(this).addClass("side_away"),$(this).css("left","0px"),setTimeout(function(){$(a).removeClass("side_away")},300)}}}),t.on("touchstart",q.touchstart),t.on("touchmove",q.touchmove),t.on("touchend",q.touchend)}}else{var t=$(".list-song");try{$(".list-song").draggable("destroy")}catch(e){}t.off("touchstart",q.touchstart),t.off("touchmove",q.touchmove),t.off("touchend",q.touchend)}},channel_function:function(e){switch(fe&&(fe=!1,$("#user_password").modal("close")),e.type){case"list":Ze&&(!Ze||e.shuffled)||Ze&&Ke==Z?Ze&&Ke==Z&&void 0!=ut&&!e.shuffled&&(J.populate_list(ut,!0),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id})):(Ke=Z,J.populate_list(e.playlist),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id}));break;case"added":J.added_song(e.value),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id}),nt=[],it=0;break;case"deleted":J.deleted_song(e.value,e.removed),nt=[],it=0;break;case"vote":Ze||(J.voted_song(e.value,e.time),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id})),nt=[],it=0;break;case"song_change":"/"!=window.location.pathname&&J.song_change(e.time,e.remove),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id}),nt=[],it=0}},insertAtBeginning:function(e,t){var a=0==J.page?"":"none",n=J.generateSong(e,t,!1,!0,!1,a,!1);$("#wrapper").append(n)},insertAtIndex:function(e,t,a){var n=J.getIndexOfSong(e.id),i="none";if(!e.now_playing){n>=J.page&&n<J.page+J.can_fit&&(i="inline-block");var s=J.generateSong(e,t,!1,!0,!1,i,!1);0===n?$("#wrapper").prepend(s):$("#wrapper > div:nth-child("+n+")").after(s);var o=$("#wrapper").children()[n];$(o).css("display",i),"inline-block"==i&&$("#wrapper").children().length>=J.page+J.can_fit+1?$($("#wrapper").children()[J.page+J.can_fit]).css("display","none"):n<J.page&&$("#wrapper").children().length-(J.page+1)>=0?$($("#wrapper").children()[J.page]).css("display","inline-block"):$("#wrapper").children().length>J.page+J.can_fit&&$($("#wrapper").children()[J.page+J.can_fit-1]).css("display","inline-block"),a&&J.page>0&&$($("#wrapper").children()[J.page-1]).css("display","none"),t&&setTimeout(function(){$(o).css("transform","translateX(0%)"),setTimeout(function(){$(o).removeClass("side_away")},300)},5)}},populate_list:function(e,t){if(q.mobilecheck()||Ee?Ee?(J.can_fit=Math.round($("#wrapper").height()/91)+1,J.element_height=$("#wrapper").height()/J.can_fit-4):(J.can_fit=Math.round(($(window).height()-$(".tabs").height()-$("header").height()-64-8)/71)+1,J.element_height=($(window).height()-$(".tabs").height()-$("header").height()-64-8)/J.can_fit-5):(J.can_fit=Math.round($("#wrapper").height()/71)+1,J.element_height=$("#wrapper").height()/J.can_fit-5.3),J.element_height<55.2&&(J.can_fit=J.can_fit-1,J.element_height=55.2,J.can_fit=Math.round(($(window).height()-$(".tabs").height()-$("header").height()-64-8)/71),J.element_height=($(window).height()-$(".tabs").height()-$("header").height()-64-8)/J.can_fit-5),void 0===ee&&(ee=$("#list-song-html").html()),ut=e,Ze&&!t)for(var a=0;a<ut.length;a++)ut[a].votes=0;J.sortList(),$("#wrapper").empty(),q.log("---------------------------"),q.log("---------FULL PLAYLIST-----"),q.log(ut),q.log("---------------------------"),ut.length>1?($.each(ut,function(e,t){if(!t.now_playing){var a=J.generateSong(t,!1,Ie,!0,!1,"",!0);$("#wrapper").append(a)}}),$("#wrapper").children().length>J.can_fit&&!$("#pageButtons").length?($('<div id="pageButtons"><span class="first_page_hide btn-flat"><i class="material-icons">first_page</i></span><a class="first_page waves-effect waves-light btn-flat"><i class="material-icons">first_page</i></a><span class="prev_page_hide btn-flat"><i class="material-icons">navigate_before</i> prev</span><a class="prev_page waves-effect waves-light btn-flat"><i class="material-icons">navigate_before</i> prev</a> <span id="pageNumber">1</span> <a class="next_page waves-effect waves-light btn-flat">next <i class="material-icons">navigate_next</i></a><span class="next_page_hide btn-flat">next <i class="material-icons">navigate_next</i></span><a class="last_page waves-effect waves-light btn-flat"><i class="material-icons">last_page</i></a><span class="last_page_hide btn-flat"><i class="material-icons">last_page</i></span></div>').insertAfter("#wrapper"),$(".prev_page").css("display","none"),$(".first_page").css("display","none"),$(".next_page_hide").css("display","none"),$(".last_page_hide").css("display","none")):$("#pageButtons").length||($('<div id="pageButtons"><span class="first_page_hide btn-flat"><i class="material-icons">first_page</i></span><a class="first_page waves-effect waves-light btn-flat"><i class="material-icons">first_page</i></a><span class="prev_page_hide btn-flat"><i class="material-icons">navigate_before</i> prev</span><a class="prev_page waves-effect waves-light btn-flat"><i class="material-icons">navigate_before</i> prev</a> <span id="pageNumber">1</span> <a class="next_page waves-effect waves-light btn-flat">next <i class="material-icons">navigate_next</i></a><span class="next_page_hide btn-flat">next <i class="material-icons">navigate_next</i></span><a class="last_page waves-effect waves-light btn-flat"><i class="material-icons">last_page</i></a><span class="last_page_hide btn-flat"><i class="material-icons">last_page</i></span></div>').insertAfter("#wrapper"),$(".prev_page").css("display","none"),$(".next_page").css("display","none"),$(".last_page").css("display","none"),$(".first_page").css("display","none"),$(".next_page_hide").css("display","inline-flex"),$(".prev_page_hide").css("display","inline-flex")),J.dynamicContentPage(-10)):(J.empty=!0,$("#wrapper").html("<span id='empty-channel-message'>The playlist is empty.</span>"),$("#pageButtons").length||$('<div id="pageButtons"><span class="first_page_hide btn-flat"><i class="material-icons">first_page</i></span><a class="first_page waves-effect waves-light btn-flat"><i class="material-icons">first_page</i></a><span class="prev_page_hide btn-flat"><i class="material-icons">navigate_before</i> prev</span><a class="prev_page waves-effect waves-light btn-flat"><i class="material-icons">navigate_before</i> prev</a> <span id="pageNumber">1</span> <a class="next_page waves-effect waves-light btn-flat">next <i class="material-icons">navigate_next</i></a><span class="next_page_hide btn-flat">next <i class="material-icons">navigate_next</i></span><a class="last_page waves-effect waves-light btn-flat"><i class="material-icons">last_page</i></a><span class="last_page_hide btn-flat"><i class="material-icons">last_page</i></span></div>').insertAfter("#wrapper"),$(".prev_page").css("display","none"),$(".next_page").css("display","none"),$(".last_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".first_page").css("display","none"),$(".next_page_hide").css("display","inline-flex"),$(".prev_page_hide").css("display","inline-flex")),$("#settings").css("visibility","visible"),$("#settings").css("opacity","1"),$("#wrapper").css("opacity","1")},dynamicContentPageJumpTo:function(e){((e*=J.can_fit)>J.page||e<J.page)&&($("#wrapper").children().slice(J.page,J.page+J.can_fit).hide(),J.page=e,$("#wrapper").children().slice(J.page,J.page+J.can_fit).css("display","inline-block"),J.page>0&&"none"==$(".prev_page").css("display")&&($(".prev_page").css("display","inline-flex"),$(".prev_page_hide").css("display","none"),$(".first_page").css("display","inline-flex"),$(".first_page_hide").css("display","none")),J.page+J.can_fit>=$("#wrapper").children().length&&($(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".last_page").css("display","none")),$("#pageNumber").html(J.page/J.can_fit+1))},dynamicContentPage:function(e){1==e?($("#wrapper").children().slice(J.page,J.page+J.can_fit).hide(),J.page=J.page+J.can_fit,$("#wrapper").children().slice(J.page,J.page+J.can_fit).css("display","inline-block"),J.page>0&&"none"==$(".prev_page").css("display")&&($(".prev_page").css("display","inline-flex"),$(".prev_page_hide").css("display","none"),$(".first_page").css("display","inline-flex"),$(".first_page_hide").css("display","none")),J.page+J.can_fit>=$("#wrapper").children().length&&($(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".last_page").css("display","none"))):10==e?($("#wrapper").children().slice(J.page,J.page+J.can_fit).hide(),J.page=Math.floor(($("#wrapper").children().length-1)/J.can_fit)*J.can_fit,$("#wrapper").children().slice(J.page,J.page+J.can_fit).css("display","inline-block"),J.page>0&&"none"==$(".prev_page").css("display")&&($(".prev_page").css("display","inline-flex"),$(".prev_page_hide").css("display","none"),$(".first_page").css("display","inline-flex"),$(".first_page_hide").css("display","none")),J.page+J.can_fit>=$("#wrapper").children().length&&($(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".last_page").css("display","none"))):-10==e?($("#wrapper").children().slice(J.page,J.page+J.can_fit).hide(),J.page=0,$("#wrapper").children().slice(J.page,J.page+J.can_fit).css("display","inline-block"),0==J.page&&"none"!=$(".prev_page").css("display")?($(".prev_page").css("display","none"),$(".prev_page_hide").css("display","inline-flex"),$(".first_page").css("display","none"),$(".first_page_hide").css("display","inline-flex")):"none"==$(".prev_page").css("display")?($(".prev_page_hide").css("display","inline-flex"),$(".first_page_hide").css("display","inline-flex")):($(".prev_page_hide").css("display","none"),$(".first_page_hide").css("display","none")),J.page+J.can_fit<$("#wrapper").children().length&&($(".next_page_hide").css("display","none"),$(".next_page").css("display","inline-flex"),$(".last_page_hide").css("display","none"),$(".last_page").css("display","inline-flex"))):($("#wrapper").children().slice(J.page-J.can_fit,J.page).css("display","inline-block"),$("#wrapper").children().slice(J.page,J.page+J.can_fit).hide(),J.page=J.page-J.can_fit<0?0:J.page-J.can_fit,0==J.page&&"none"!=$(".prev_page").css("display")?($(".prev_page").css("display","none"),$(".prev_page_hide").css("display","inline-flex"),$(".first_page").css("display","none"),$(".first_page_hide").css("display","inline-flex")):"none"==$(".prev_page").css("display")?($(".prev_page_hide").css("display","inline-flex"),$(".first_page_hide").css("display","inline-flex")):($(".prev_page_hide").css("display","none"),$(".first_page_hide").css("display","none")),J.page+J.can_fit<$("#wrapper").children().length&&($(".next_page_hide").css("display","none"),$(".next_page").css("display","inline-flex"),$(".last_page_hide").css("display","none"),$(".last_page").css("display","inline-flex"))),$("#pageNumber").html(J.page/J.can_fit+1)},added_song:function(e){var t;if(void 0!=e){if(0!==ut.length&&(t=ut.pop()),ut.push(e),J.sortList(),t&&ut.push(t),$("#suggested-"+e.id).length>0){Qe-=1,Qe<0&&(Qe=0);var a=Qe>9?"9+":Qe;$(".suggested-link span.badge.new.white").hasClass("hide")||0!=a||$(".suggested-link span.badge.new.white").addClass("hide"),$(".suggested-link span.badge.new.white").text(a)}$("#suggested-"+e.id).remove(),J.empty&&(J.empty=!1),$("#empty-channel-message").remove(),J.insertAtIndex(e,!0),$($("#wrapper").children()[J.page+J.can_fit]).css("display","none"),$("#wrapper").children().length>J.page+J.can_fit?($(".next_page_hide").css("display","none"),$(".next_page").removeClass("hide"),$(".last_page_hide").css("display","none"),$(".next_page").css("display","inline-flex"),$(".last_page").css("display","inline-flex")):($(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"))}},deleted_song:function(e,t){try{var a=J.getIndexOfSong(e);$("#wrapper").children()[a];a<J.page&&$("#wrapper").children().length-(J.page+2)>=0?($($("#wrapper").children()[J.page]).css("height",0),$($("#wrapper").children()[J.page]).css("display","inline-block"),$($("#wrapper").children()[J.page]).css("height",J.element_height)):$("#wrapper").children().length>J.page+J.can_fit&&($($("#wrapper").children()[J.page+J.can_fit]).css("height",0),$($("#wrapper").children()[J.page+J.can_fit]).css("display","inline-block"),$($("#wrapper").children()[J.page+J.can_fit]).css("height",J.element_height)),J.page>=$("#wrapper").children().length-1?(J.dynamicContentPage(-1),$(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".last_page").css("display","none")):J.page+J.can_fit+1>=$("#wrapper").children().length-1&&($(".next_page_hide").css("display","inline-flex"),$(".next_page").css("display","none"),$(".last_page_hide").css("display","inline-flex"),$(".last_page").css("display","none")),J.page<=a&&J.page-J.can_fit<=a?($("#"+e).addClass("side_away"),$("#"+e).find(".mobile-delete").remove(),$("#"+e).css("transform","translateX(-100%)"),setTimeout(function(){$("#"+e).remove()},300)):$("#"+e).remove(),ut.splice(J.getIndexOfSong(e),1),xt.sendNext({title:ut[0].title,videoId:ut[0].id})}catch(t){ut.splice(J.getIndexOfSong(e),1),J.empty||($("#"+e).remove(),a<J.page&&$("#wrapper").children().length-(J.page+1)>=0?$($("#wrapper").children()[J.page-1]).css("display","inline-block"):$("#wrapper").children().length>J.page+J.can_fit&&$($("#wrapper").children()[J.page+(J.can_fit-1)]).css("display","inline-block"),xt.sendNext({title:ut[0].title,videoId:ut[0].id}))}ut.length<=2&&(J.empty=!0,$("#wrapper").html("<span id='empty-channel-message'>The playlist is empty.</span>")),$("#suggested-"+e).remove(),J.page,J.can_fit,$("#wrapper").children().length,J.page>=$("#wrapper").children().length&&J.dynamicContentPage(-1),It.checkUserEmpty()},voted_song:function(e,t){var a=J.getIndexOfSong(e),n=ut[a];ut[a].votes+=1,ut[a].added=t,J.sortList(),$("#"+e).remove(),J.insertAtIndex(n,!1)},song_change:function(e,t){try{var a=ut.length-1;$("#wrapper").children()[0].remove(),ut.length<=1&&(J.empty=!0,$("#wrapper").html("<span id='empty-channel-message'>The playlist is empty.</span>")),ut[0].now_playing=!0,ut[0].votes=0,ut[0].guids=[],ut[0].added=e,t?delete ut[a]:ut[a].now_playing=!1,q.log("---------------------------"),q.log("---SONG ON FIRST INDEX-----"),q.log(ut[0]),q.log("---------------------------"),ut.push(ut.shift()),t||J.insertAtIndex(ut[$("#wrapper").children().length],!1,!0)}catch(e){}},vote:function(e,t){return!Ze||"del"==t&&Q&&!X&&""!=re?D.emit("vote",{channel:Z,id:e,type:t,adminpass:""==re?"":Y.crypt_pass(re),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}):"pos"==t?J.voted_song(e,(new Date).getTime()/1e3):J.deleted_song(e),!0},skip:function(){return Ze?xt.playNext():D.emit("skip",{pass:""==re?"":Y.crypt_pass(re),id:ft,channel:Z.toLowerCase(),userpass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),!0},exportToSpotify:function(){$.ajax({type:"GET",url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+De.access_token},success:function(e){var t=e.id;$("#playlist_loader_export").removeClass("hide"),$(".exported-list-container").removeClass("hide"),$.ajax({type:"POST",url:"https://api.spotify.com/v1/users/"+t+"/playlists",headers:{Authorization:"Bearer "+De.access_token,"Content-Type":"application/json"},data:JSON.stringify({name:Z.toLowerCase()+" - Zoff",public:!0}),success:function(e){var a=e.id;$.each(ut,function(e,n){J.searchSpotify(n,a,t)})}})}})},searchSpotify:function(e,t,a){var n=e.title,i=e.title.toLowerCase().replace("-"," ");i.startsWith("the")&&(i=i.replace("the","")),i=i.replace(" hd",""),i=i.replace("official hd video",""),i=i.replace("unofficial video",""),i=i.replace("studio footage",""),i=i.replace("great song",""),i=i.replace("-"," "),i=i.replace("-"," "),i=i.replace(" hq"," "),i=i.replace("lyric video",""),i=i.replace("lyrics video",""),i=i.replace("album version",""),i=i.replace("drive original movie soundtrack",""),i=i.replace("original movie soundtrack",""),i=i.replace("live sessions",""),i=i.replace("audio only",""),i=i.replace("audio",""),i=i.replace("(new)",""),i=i.replace(" by "," "),i=i.replace(" vs "," "),i=i.replace("(full)"," "),i=i.replace("(video)"," "),i=i.replace("&"," "),i=i.replace("with lyrics",""),i=i.replace("lyrics",""),i=i.replace("w/",""),i=i.replace("w/",""),i=i.replace("official video",""),i=i.replace("studio version",""),i=i.replace("official music video",""),i=i.replace("music video",""),i=i.replace("musicvideo",""),i=i.replace("original video",""),i=i.replace("full version",""),i=i.replace("full song",""),i=i.replace("(official)",""),i=i.replace("official",""),i=i.replace("(original)",""),i=i.replace("("," "),i=i.replace(")"," "),i=i.replace("|",""),i=i.replace("feat."," "),i=i.replace("feat"," "),i=i.replace("ft."," "),i=i.replace("["," "),i=i.replace("]"," "),i=i.replace(" free ",""),i=i.replace(" hd",""),i=i.replace("original mix"," "),i=i.replace("radio edit"," "),i=i.replace("pop version"," "),i=i.replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," "),i=encodeURIComponent(i),$.ajax({type:"GET",url:"https://api.spotify.com/v1/search?q="+i+"&type=track",headers:{Authorization:"Bearer "+De.access_token},async:!0,statusCode:{429:function(n){console.log(n.getAllResponseHeaders());var i=n.getResponseHeader("Retry-After");console.log(i),i||(i=5),i=parseInt(i,10),q.log("Retry-After",i),setTimeout(function(){J.searchSpotify(e,t,a)},1e3*i)}},error:function(n){if(429==n.status){console.log(n.getAllResponseHeaders());var i=n.getResponseHeader("Retry-After");console.log(i),i||(i=5),i=parseInt(i,10),q.log("Retry-After",i),setTimeout(function(){J.searchSpotify(e,t,a)},1e3*i)}},success:function(e){var s=!1;if($.each(e.tracks.items,function(e,t){if(t.name=t.name.toLowerCase(),t.name=t.name.replace("("," "),t.name=t.name.replace(")"," "),t.name=t.name.replace("["," "),t.name=t.name.replace("]"," "),t.name=t.name.replace("-"," "),t.name=t.name.replace("-"," "),t.name=t.name.replace("-"," "),t.name=t.name.replace("original mix"," "),t.name=t.name.replace("album version"," "),t.name=t.name.replace("abum version"," "),t.name=t.name.replace("feat."," "),t.artists[0].name=t.artists[0].name.replace("feat."," "),t.artists[0].name=t.artists[0].name.replace("feat"," "),t.name=t.name.replace("feat"," "),t.name=t.name.replace("ft."," "),t.name=t.name.replace("radio edit"," "),t.name=t.name.replace("pop version"," "),t.name=t.name.replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," "),t.artists[0].name=t.artists[0].name.replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ").replace("  "," ")," "==t.name.substring(t.name.length-1)&&(t.name=t.name.substring(0,t.name.length-1)),"."==t.name.substring(t.name.length-1)&&"."!=i.substring(i.length-1)&&(t.name=t.name.substring(0,t.name.length-1)),decodeURIComponent(i).indexOf(t.artists[0].name.toLowerCase())>=0&&decodeURIComponent(i).indexOf(t.name.toLowerCase())>=0)return s=!0,J.uris.push(t.uri),q.log("Found",i),!1;for(var a=t.name.split(" "),e=0;e<a.length;e++)if(!("and"==a[e]&&i.indexOf("&")>=0||"&"==a[e]&&i.indexOf("and")>=0)&&i.indexOf(a[e])<0)return!0;return s=!0,J.uris.push(t.uri),q.log("Found",i),!1}),s||(J.not_found.push(n),J.num_songs=J.num_songs+1,q.log("Didn't find",n)),J.num_songs+J.uris.length==ut.length){if(J.uris.length>100){for(;J.uris.length>100;)J.addToSpotifyPlaylist(J.uris.slice(0,100),t,a),J.uris=J.uris.slice(100,J.uris.length);J.addToSpotifyPlaylist(J.uris,t,a),$("#playlist_loader_export").addClass("hide")}else J.addToSpotifyPlaylist(J.uris,t,a),$("#playlist_loader_export").addClass("hide");0==$(".exported-spotify-list").length&&$(".exported-list").append("<a target='_blank' class='btn light exported-playlist exported-spotify-list' href='https://open.spotify.com/user/"+a+"/playlist/"+t+"'>"+Z+"</a>"),$.each(J.not_found,function(e,t){var a=$("<div>"+ze+"</div>");a.find(".extra-add-text").attr("value",t),a.find(".extra-add-text").attr("title",t),$(".not-exported-container").append(a.html())}),$(".not-exported").removeClass("hide"),$(".spotify_export_button").css("display","block")}}})},addToSpotifyPlaylist:function(e,t,a){$.ajax({type:"POST",url:"https://api.spotify.com/v1/users/"+a+"/playlists/"+t+"/tracks",headers:{Authorization:"Bearer "+De.access_token,"Content-Type":"application/json"},data:JSON.stringify({uris:e}),error:function(n){var i=t,s=e,o=a;setTimeout(function(){J.addToSpotifyPlaylist(s,i,o)},3e3)},success:function(e){q.log("Added songs")}})},exportToYoutube:function(){$(".exported-list-container").removeClass("hide"),$("#playlist_loader_export").removeClass("hide"),$.ajax({type:"POST",url:"https://www.googleapis.com/youtube/v3/playlists?part=snippet",headers:{Authorization:"Bearer "+Ue.access_token,"Content-Type":"application/json"},data:JSON.stringify({snippet:{title:q.upperFirst(Z.toLowerCase()),description:"Playlist exported from zoff"}}),success:function(e){var t=e.id;J.addToYoutubePlaylist(t,ut,0,"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet")},error:function(e){q.log(e)}})},addToYoutubePlaylist:function(e,t,a,n){var i=JSON.stringify({snippet:{playlistId:e,resourceId:{kind:"youtube#video",videoId:t[a].id}}});$.ajax({type:"POST",url:n,headers:{Authorization:"Bearer "+Ue.access_token,"Content-Type":"application/json"},data:i,success:function(i){q.log("Added video: "+t[a].id+" to playlist id "+e),a==t.length-1?(q.log("All videoes added!"),q.log("url: https://www.youtube.com/playlist?list="+e),$(".exported-list").append("<a target='_blank' class='btn light exported-playlist' href='https://www.youtube.com/playlist?list="+e+"'>"+Z+"</a>"),$("#playlist_loader_export").addClass("hide"),$(".current_number").addClass("hide")):($(".current_number").removeClass("hide"),$(".current_number").text(a+1+" of "+t.length),J.addToYoutubePlaylist(e,t,a+1,n))}})},importOldList:function(e){var t="",a=0;playlist_url="lists/"+e+".json",yt=$.parseJSON($.ajax({type:"GET",url:playlist_url,async:!1}).responseText),$.each(yt.songs,function(e,n){t+=n.id+",",a>45&&(Tt.addVideos(t),t="",a=0),a++}),Tt.addVideos(t),document.getElementById("search").value=""},sortList:function(){ut.sort(q.predicate({name:"votes",reverse:!0},{name:"added",reverse:!1},{name:"title",reverse:!1}))},show:function(){q.mobilecheck()||(K?(K=!1,$("#toptitle").empty(),$("#chan").addClass("bigChan"),$("#chan").html("zoff.me/"+Z.toLowerCase())):(K=!0,$("#toptitle").html("Zoff"),$("#chan").removeClass("bigChan"),$("#chan").html(Z)))},generateSong:function(e,t,a,n,i,s,o){void 0===ee&&(ee=$("#list-song-html").html());var l,r,c=e.id,d=e.title,p=e.votes,u="background-image:url('//img.youtube.com/vi/"+c+"/mqdefault.jpg');",g=$("<div>"+ee+"</div>"),h="style";if(t&&(g.find(".list-song").css("transform","translateX(100%)"),g.find(".list-song").addClass("side_away")),g.find(".list-song").css("height",J.element_height),X||g.find(".card-action").removeClass("hide"),1==p&&g.find(".vote-text").text("vote"),a&&(u="//img.youtube.com/vi/"+c+"/mqdefault.jpg",h="data-original"),n){g.find(".list-votes").text(p),g.find("#list-song").attr("data-video-id",c),g.find("#list-song").attr("data-video-type","song"),g.find("#list-song").attr("id",c),g.find(".vote-container").attr("title",d),($("#wrapper").children().length>=J.can_fit&&o||"none"==s)&&g.find(".card").css("display","none"),l=".vote-container",r="delete_button";var m=q.secondsToOther(e.duration);g.find(".card-duration").text(q.pad(m[0])+":"+q.pad(m[1]))}else if(!n){g.find(".suggested_remove").removeClass("hide"),g.find(".vote-text").text(""),g.find(".card-duration").text(q.pad(e.duration[0])+":"+q.pad(e.duration[1]));var f="user";l=".add-suggested",i?r="del_user_suggested":(r="del_suggested",f="system"),g.find(".vote-container").attr("class","clickable add-suggested"),g.find(".add-suggested").attr("title",d),g.find(".delete_button").addClass(r),g.find(l).attr("data-video-title",d),g.find(l).attr("data-video-length",e.length),g.find(l).attr("data-added-by",f),g.find("#list-song").attr("data-video-type","suggested"),g.find("#list-song").attr("data-video-id",c),g.find("#list-song").attr("id","suggested-"+c),g.find(".list-image").attr("class",g.find(".list-image").attr("class").replace("list-image","list-suggested-image"))}return g.find(".mobile-delete").remove(),g.find(".list-title").text(d),g.find(".list-title").attr("title",d),g.find(l).attr("data-video-id",c),g.find(".list-image").attr(h,u),g.find(".list-suggested-image").attr(h,u),g.find("."+r).attr("data-video-id",c),g.html()},getIndexOfSong:function(e){try{return indexes=$.map(ut,function(t,a){if(t.id==e)return a}),indexes[0]}catch(e){}},scrollTop:function(){$("#wrapper").scrollTop(0)},scrollBottom:function(){$("#wrapper").scrollTop($("#wrapper")[0].scrollHeight)}},W=3,Z=void 0===window.chan?$("#chan").html():window.chan,X=!0,Q=0,K=!0,ee=$("#list-song-html").html(),te=!1,ae="AIzaSyDvMlC0Kvk76-WO9UrtBaaEYyUw4z-TGqE",ne=!1,ie=/P((([0-9]*\.?[0-9]*)Y)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)W)?(([0-9]*\.?[0-9]*)D)?)?(T(([0-9]*\.?[0-9]*)H)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)S)?)?/,se=[],oe=!1,le=0,j=1,re="",ce=!1,de="",pe=!1,ue=1,ge="",he=!1,me=!1,fe=!1,ye=!1,ve=!1,_e=!1,$e=1,we=!1,be=6e3,ke=Date.now(),Ce=!1,xe=!1,Se="",Te=-1,Ie=!1,Ee=!1,Le=!0,Be=!1,Me=!1,Ae=!1,Pe=!1,Ne=!1,De={},Ve=!1,Oe="",ze="",Ye=300,je=600,Re="&autoplay",qe=!1,Ue={},He=!1,Fe=!1,Ge="808080",Je=!1,We=!1,Ze=!1,Xe=!1,Qe=0,Ke="",et="",tt=!1,at="",nt=[],it=0,st="";if(void 0===localStorage.debug){localStorage.debug=!1}var ot,lt,rt,ct,dt,pt,ut,se,gt,ht,mt,ue,ft,yt,vt,_t,$t,D,wt={"sync disconnect on unload":!0,secure:!0,"force new connection":!0},bt=!1,kt=!1;try{navigator.serviceWorker.getRegistration("/").then(function(e){e&&e.unregister()})}catch(e){}$.ajaxPrefilter(function(e,t,a){e.async=!0}),$().ready(function(){localStorage.getItem("VERSION")&&parseInt(localStorage.getItem("VERSION"))==W||localStorage.setItem("VERSION",W),bt||"/"==window.location.pathname?kt||"/"!=window.location.pathname||t():a(),q.mobilecheck()&&D.on("guid",function(e){st=e}),D.on("connect",function(){qe&&(qe=!1,$(".connect_error").fadeOut(function(){$(".connect_error").remove(),Materialize.toast("Connected!",2e3,"green lighten"),Ze&&D.emit("offline",{status:!0,channel:void 0!=Z?Z.toLowerCase():""}),void 0!==Y.get_pass(Z.toLowerCase())&&""!==Y.get_pass(Z.toLowerCase())&&D.emit("password",{password:Y.crypt_pass(Y.get_pass(Z.toLowerCase())),channel:Z.toLowerCase()})}))}),D.on("self_ping",function(){void 0!=Z&&""!=Z.toLowerCase()&&D.emit("self_ping",{channel:Z.toLowerCase()})}),o();try{$.ajax({type:"GET",url:"https://api.github.com/users/zoff-music/received_events",success:function(e){for(var t=0;t<e.length;t++)if("PushEvent"==e[t].type)return void $("#latest-commit").html("Latest Commit: <br>"+e[0].created_at.substring(0,10)+": "+e[0].actor.display_login+"<br><a href='https://github.com/"+e[0].repo.name+"/commit/"+e[0].payload.commits[0].sha+"' target='_blank'>"+e[0].payload.commits[0].sha.substring(0,10)+"</a>: "+e[0].payload.commits[0].message+"<br")}})}catch(e){q.log("Error with fetching GitHub commit info")}}),initializeCastApi=function(){cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"E6856E24",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED});var e=cast.framework.CastContext.getInstance();tt=!0,e.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,function(e){switch(q.log("session state"),q.log(e.sessionState),e.sessionState){case cast.framework.SessionState.SESSION_STARTED:U=cast.framework.CastContext.getInstance().getCurrentSession(),U.addMessageListener("urn:x-cast:zoff.me",i),chrome.cast.media.GenericMediaMetadata({title:_t,image:"https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"}),chrome.cast.Image("https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"),Fe=!0,_e=!1,ct=!1;var t;try{t=xt.player.getCurrentTime()}catch(e){t=vt}U.sendMessage("urn:x-cast:zoff.me",{type:"loadVideo",videoId:ft,seekTo:t,channel:Z.toLowerCase()}),U.sendMessage("urn:x-cast:zoff.me",{type:"nextVideo",videoId:ut[0].id,title:ut[0].title}),q.mobilecheck()&&!he&&(he=!0,U.sendMessage("urn:x-cast:zoff.me",{type:"mobilespecs",guid:st,socketid:D.id,adminpass:""==re?"":Y.crypt_pass(re),channel:Z.toLowerCase(),userpass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})),n(1);break;case cast.framework.SessionState.SESSION_RESUMED:U=cast.framework.CastContext.getInstance().getCurrentSession(),U.addMessageListener("urn:x-cast:zoff.me",i),chrome.cast.media.GenericMediaMetadata({title:_t,image:"https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"}),chrome.cast.Image("https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"),Fe=!0,_e=!1,ct=!1;var t;try{t=xt.player.getCurrentTime()}catch(e){t=vt}U.sendMessage("urn:x-cast:zoff.me",{type:"loadVideo",videoId:ft,seekTo:t,channel:Z.toLowerCase()}),U.sendMessage("urn:x-cast:zoff.me",{type:"nextVideo",videoId:ut[0].id,title:ut[0].title}),n(1);break;case cast.framework.SessionState.SESSION_ENDED:Fe=!1,n(0)}}),e.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,function(e){q.log("cast state"),q.log(e.castState),"NOT_CONNECTED"==e.castState?($(".castButton").css("display","block"),Xe=!0,localStorage.getItem("_chSeen")&&"seen"==localStorage.getItem("_chSeen")||($(".castButton").css("display","block"),ce=!0,$(".tap-target").tapTarget("open"),F=setTimeout(function(){$(".tap-target").tapTarget("close")},4e3),localStorage.setItem("_chSeen","seen"),$(".castButton").removeClass("castButton-white-active"))):"NO_DEVICES_AVAILABLE"==e.castState&&(Xe=!1)}),"NOT_CONNECTED"==e.getCastState()&&($(".castButton").css("display","block"),$(".castButton").removeClass("castButton-white-active"),Xe=!0)},window.zoff={enable_debug:_,disable_debug:w},$(document).on("click",".accept-delete",function(e){e.preventDefault();var t=$(this).attr("data-video-id");t&&J.vote(t,"del"),$("#delete_song_alert").modal("close")}),$(document).keyup(function(e){27==e.keyCode?($("#results").html(""),0==$("#search-wrapper").length||q.contains($("#search-wrapper").attr("class").split(" "),"hide")||$("#search-wrapper").toggleClass("hide"),0!=$("#song-title").length&&q.contains($("#song-title").attr("class").split(" "),"hide")&&$("#song-title").toggleClass("hide"),"close"==$("#search-btn i").html()&&$("#search-btn i").html("search"),0==$(".search-container").length||q.contains($(".search-container").attr("class").split(" "),"hide")||$("#results").toggleClass("hide")):13!=e.keyCode||"fireplace"!=$("#search").val()||$(".search-container").hasClass("hide")||"/"==window.location.pathname||(clearTimeout(dt),$("#results").html(""),$("#search").val(""),0==$("#search-wrapper").length||q.contains($("#search-wrapper").attr("class").split(" "),"hide")||$("#search-wrapper").toggleClass("hide"),0!=$("#song-title").length&&q.contains($("#song-title").attr("class").split(" "),"hide")&&$("#song-title").toggleClass("hide"),"close"==$("#search-btn i").html()&&$("#search-btn i").html("search"),0==$(".search-container").length||q.contains($(".search-container").attr("class").split(" "),"hide")||$("#results").toggleClass("hide"),Ce?(Ce=!1,xt.fireplace.destroy(),$("#fireplace_player").css("display","none")):(Ce=!0,$("#fireplace_player").css("display","block"),xt.createFireplacePlayer()))}),$(document).on("mouseenter",".card.sticky-action",function(e){var t=this;$(t).find(".card-reveal").attr("style","display: block;"),clearTimeout(ot),ot=setTimeout(function(){$(t).find(".card-reveal").attr("style","display: block;transform: translateY(-100%);")},50)}),$(document).on("click","#chat_submit",function(e){e.preventDefault(),$("#chatForm").submit()}),$(document).on("click",".list-remove",function(e){e.preventDefault(),$("#"+$(this).parent().attr("id")).contextMenu()}),$(document).on("mouseleave",".card.sticky-action",function(e){var t=this;$(t).find(".card-reveal").attr("style","display: block;transform: translateY(0%);"),clearTimeout(ot),ot=setTimeout(function(){$(t).find(".card-reveal").attr("style","display: none;")},100)}),$(document).on("click","#offline-mode",function(e){e.preventDefault(),Y.get_offline()?T(!1,Ze):T(!0,Ze)}),$(document).on("submit","#thumbnail_form",function(e){e.preventDefault(),D.emit("suggest_thumbnail",{channel:Z,thumbnail:$("#chan_thumbnail").val(),adminpass:Y.crypt_pass(Y.get_pass(Z.toLowerCase())),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),$("#chan_thumbnail").val("")}),$(document).on("submit","#description_form",function(e){e.preventDefault(),D.emit("suggest_description",{channel:Z,description:$("#chan_description").val(),adminpass:Y.crypt_pass(Y.get_pass(Z.toLowerCase())),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),$("#chan_description").val("")}),$(document).on("click","#playpause-overlay",function(){$("#play-overlay").hasClass("hide")?(xt.pauseVideo(),$("#play-overlay").toggleClass("hide"),$("#pause-overlay").toggleClass("hide")):$("#pause-overlay").hasClass("hide")&&(xt.playVideo(),$("#play-overlay").toggleClass("hide"),$("#pause-overlay").toggleClass("hide"))}),$(document).on("click","#cookieok",function(){$(this).fadeOut(function(){$(this).remove(),localStorage.ok_cookie=!0})}),$(document).on("click",".connect_error",function(e){e.preventDefault(),$(this).fadeOut(function(){$(this).remove(),qe=!1})}),$(document).on("click",".extra-button-search",function(e){e.preventDefault(),$("#search").val($(this).attr("data-text")),Tt.search($(this).attr("data-text"))}),$(document).on("click",".extra-button-delete",function(e){e.preventDefault(),$(this).parent().remove(),0===$(".not-imported-container").children().length&&$(".not-imported").toggleClass("hide")}),$(document).on("click","#closePlayer",function(e){e.preventDefault(),D.emit("change_channel");try{if(Fe){cast.framework.CastContext.getInstance().getCurrentSession().endSession(!0)}xt.player.destroy(),$("#player_bottom_overlay").toggleClass("hide"),$("#player").remove()}catch(e){}D.removeEventListener("np"),D.removeEventListener("id"),D.removeEventListener(pt),$("#alreadychannel").remove(),xt.player="",document.title="Zoff - the shared YouTube based radio",$("#closePlayer").remove()}),$(document).on("click",".prev_page",function(e){e.preventDefault(),J.dynamicContentPage(-1)}),$(document).on("click",".modal-close",function(e){e.preventDefault()}),$(document).on("change",".password_protected",function(e){e.preventDefault(),this.checked?($("#user_password").modal("open"),$("#user-pass-input").focus()):(Se="",$(".change_user_pass").hasClass("hide")||$(".change_user_pass").addClass("hide"),O.save(!0))}),$(document).on("submit","#user-password-channel-form",function(e){e.preventDefault(),fe?(ge=CryptoJS.SHA256($("#user-pass-input").val()).toString(),$("#user-pass-input").val(""),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:Z.toLowerCase(),pass:Y.crypt_pass(ge)})):($("#user_password").modal("close"),Se=$("#user-pass-input").val(),ve=!1,$("#user-pass-input").val(""),O.save(!0))}),$(document).on("click",".change_user_pass_btn",function(e){e.preventDefault(),ve=!0,$("#user_password").modal("open"),$("#user-pass-input").focus()}),$(document).on("click",".submit-user-password",function(e){e.preventDefault(),fe?(ge=CryptoJS.SHA256($("#user-pass-input").val()).toString(),$("#user-pass-input").val(""),D.emit("list",{version:parseInt(localStorage.getItem("VERSION")),channel:Z.toLowerCase(),pass:Y.crypt_pass(ge)})):($("#user_password").modal("close"),Se=$("#user-pass-input").val(),ve=!1,$("#user-pass-input").val(""),O.save(!0))}),$(document).on("click",".close-user-password",function(){fe?(xt.stopInterval=!0,ye=!0,$(".castButton").tooltip("remove"),$("#viewers").tooltip("remove"),$("#offline-mode").tooltip("remove"),$("#chan_thumbnail").tooltip("remove"),$("#admin-lock").tooltip("remove"),window.history.pushState("to the frontpage!","Title","/"),P()):($("#user-pass-input").val(""),ve||$(".password_protected").prop("checked",!1),ve=!1)}),$(document).on("click",".delete-all-songs",function(e){e.preventDefault(),D.emit("delete_all",{channel:Z.toLowerCase(),adminpass:""==re?"":Y.crypt_pass(re),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})}),$(document).on("click",".not-exported-container .not-exported-element #extra-export-container-text .extra-add-text",function(){this.select()}),$(document).on("click",".next_page",function(e){e.preventDefault(),J.dynamicContentPage(1)}),$(document).on("click",".last_page",function(e){e.preventDefault(),J.dynamicContentPage(10)}),$(document).on("click",".first_page",function(e){e.preventDefault(),J.dynamicContentPage(-10)}),$(document).on("click","#toast-container",function(){Materialize.Toast.removeAll()}),$(document).on("click","#aprilfools",function(){$(".mega").css("-webkit-transform","rotate(0deg)"),$(".mega").css("-moz-transform","rotate(0deg)")}),$(document).on("change","#view_channels_select",function(e){var t=this;$e!=parseInt(t.value)&&R.populate_channels(R.all_channels,1==parseInt(t.value)),$e=parseInt(t.value)}),$(document).on("keyup mouseup","#width_embed",function(){var e=$(this);je=e.val(),$("#embed-area").val(k(Re,je,Ye,Ge))}),$(document).on("keyup mouseup","#height_embed",function(){var e=$(this);Ye=e.val(),$("#embed-area").val(k(Re,je,Ye,Ge))}),$(document).on("input","#color_embed",function(){var e=$(this);Ge=e.val().substring(1),$("#embed-area").val(k(Re,je,Ye,Ge))}),$(document).on("click",".chan-link",function(e){e.preventDefault(),R.to_channel($(this).attr("href"),!1)}),$(document).on("click",".listen-button",function(e){""===$(".room-namer").val()&&(e.preventDefault(),R.to_channel($(".room-namer").attr("placeholder")))}),$(document).on("submit",".channel-finder",function(e){return e.preventDefault(),R.to_channel($(".room-namer").val()),!1}),$(document).on("submit",".channel-finder-mobile",function(e){return e.preventDefault(),R.to_channel($("#searchFrontpage").val()),!1}),$(document).on("change","input[class=remote_switch_class]",function(){G.change_enabled(document.getElementsByName("remote_switch")[0].checked),Y.set_remote(enabled)}),$(document).on("change","input[class=offline_switch_class]",function(){Ze=document.getElementsByName("offline_switch")[0].checked,T(Ze,!Ze)}),$(document).on("change","input[class=conf]",function(){O.save(!1)}),$("#clickme").click(function(){xt.playVideo()}),$(document).on("click","#listExport",function(e){if(e.preventDefault(),q.log(ut),He)J.exportToYoutube();else{var t=S(29);window.callback=function(e){Ue=e,Ue.state==t?(He=!0,$("#playlist_loader_export").removeClass("hide"),$(".youtube_export_button").addClass("hide"),setTimeout(function(){He=!1,Ue={}},1e3*Ue.expires_in),J.exportToYoutube()):(Ue="",console.error("Nonce doesn't match")),youtube_window.close(),window.callback=""},youtube_window=window.open("/o_callback#youtube=true&nonce="+t,"","width=600, height=600")}}),$(document).on("click",".export-spotify-auth",function(e){e.preventDefault();var t=S(29);window.callback=function(e){De=e,De.state==t?(Ve=!0,I(!0),setTimeout(function(){Ve=!1,De={},I(!1)},1e3*De.expires_in),$(".spotify_export_button").css("display","none"),J.exportToSpotify()):(De={},console.error("States doesn't match")),spotify_window.close(),window.callback=""},spotify_window=window.open("/o_callback#spotify=true&nonce="+t,"","width=600, height=600")}),$(document).on("submit","#listImport",function(e){e.preventDefault();var t=$("#import").val().split("https://www.youtube.com/playlist?list=");""!==$("#import").val()&&2==t.length?(Tt.importPlaylist(t[1]),document.getElementById("import").value="",document.getElementById("import").disabled=!0,$("#import").addClass("hide"),$("#playlist_loader").removeClass("hide")):(A(),Materialize.toast("It seems you've entered a invalid url.",4e3)),document.getElementById("import").value=""}),$(document).on("submit","#listImportSpotify",function(e){if(e.preventDefault(),Ve&&""!==$("#import_spotify").val()){var t=$("#import_spotify").val().split("https://open.spotify.com/user/");if(2==t.length){t=t[1].split("/");var a=t[0],n=t[2];document.getElementById("import_spotify").disabled=!0,$("#import_spotify").addClass("hide"),$("#playlist_loader_spotify").removeClass("hide"),Tt.importSpotifyPlaylist("https://api.spotify.com/v1/users/"+a+"/playlists/"+n+"/tracks")}else A(),Materialize.toast("It seems you've entered a invalid url.",4e3)}document.getElementById("import_spotify").value=""}),$(window).focus(function(){$("#favicon").attr("href","/assets/images/favicon.png"),te=!1}),$(document).on("change","#autoplay",function(){Re=this.checked?"&autoplay":"",$("#embed-area").val(k(Re,je,Ye,Ge))}),$(document).on("click","#playbutton_remote",function(e){e.preventDefault(),Ct.play_remote()}),$(document).on("click","#pausebutton_remote",function(e){e.preventDefault(),Ct.pause_remote()}),$(document).on("click","#skipbutton_remote",function(e){e.preventDefault(),Ct.skip_remote()}),$(document).on("submit","#remoteform",function(e){e.preventDefault(),Ct.get_input($("#remote_channel").val())}),$(document).on("click",".chat-link",function(){$("#text-chat-input").focus(),$("#chat-btn i").css("opacity",1),z.channel_received=0,z.all_received=0,$(".chat-link span.badge.new.white").hasClass("hide")||$(".chat-link span.badge.new.white").addClass("hide"),te=!1,$("#favicon").attr("href","/assets/images/favicon.png")}),$(document).on("keyup",".search_input",function(e){B(e)}),$(document).on("click",".chat-tab",function(){$("#text-chat-input").focus()}),$(document).on("click","#skip",function(e){e.preventDefault(),J.skip()}),$(document).on("click","#chan",function(e){e.preventDefault(),J.show()}),$(document).on("submit","#adminForm",function(e){e.preventDefault(),O.pass_save()}),$(document).on("click",".chat-link",function(e){Me=!0,te=!1,Ae=!1,$(".chat-link").attr("style","color: white !important;"),Pe=!1,$("#favicon").attr("href","/assets/images/favicon.png"),$("#chatPlaylist").css("display","block"),$("#wrapper").css("display","none"),$("#suggestions").css("display","none"),$("#text-chat-input").focus(),$("#pageButtons").css("display","none")}),$(document).on("click",".playlist-link",function(e){Me=!1,$("#chatPlaylist").css("display","none"),$("#wrapper").css("display","block"),$("#suggestions").css("display","none"),$("#pageButtons").css("display","flex")}),$(document).on("click",".suggested-link",function(e){Me=!1,$("#chatPlaylist").css("display","none"),$("#wrapper").css("display","none"),$("#suggestions").css("display","block"),$("#pageButtons").css("display","none")}),$(document).on("click",".import-spotify-auth",function(e){e.preventDefault();var t=S(29);window.callback=function(e){De=e,De.state==t?(Ve=!0,I(!0),setTimeout(function(){Ve=!1,De={},I(!1),$(".spotify_authenticated").css("display","none"),$(".spotify_unauthenticated").css("display","block")},1e3*De.expires_in)):(De={},console.error("States doesn't match")),spotify_window.close(),window.callback=""},spotify_window=window.open("/o_callback#spotify=true&nonce="+t,"","width=600, height=600")}),$(document).on("click",".import-youtube",function(e){e.preventDefault(),$(".youtube_unclicked").css("display","none"),$(".youtube_clicked").css("display","block")}),$(document).on("submit","#chatForm",function(e){e.preventDefault(),z.chat(document.getElementById("chatForm").input)}),$(document).on("click","#shuffle",function(e){e.preventDefault(),O.shuffle()}),$(document).on("click","#search-btn",function(e){e.preventDefault(),Tt.showSearch()}),$(document).on("click","#song-title",function(e){e.preventDefault(),Tt.showSearch()}),$(document).on("click","#admin-lock",function(e){e.preventDefault(),O.log_out()}),$(document).on("click","#closeSettings",function(e){e.preventDefault(),O.hide_settings()}),$(window).resize(function(){if(Z&&!q.mobilecheck()){var e=Math.round($("#wrapper").height()/71)+1;(e>J.can_fit||e<J.can_fit)&&J.dynamicContentPage(-10),J.can_fit<e?$($("#wrapper").children()[J.page+e-1]).css("display","inline-block"):J.can_fit>e&&$($("#wrapper").children()[J.page+e]).css("display","none"),J.can_fit=e,J.element_height=$("#wrapper").height()/J.can_fit-5.3,$(".list-song").css("height",J.element_height+"px"),C(),$("#controls").length>0&&!q.mobilecheck()?$("#seekToDuration").css("top",$("#controls").position().top-55):$("#controls").length>0&&$("#seekToDuration").css("top",$("#controls").position().top-20)}}),$(document).on("click",".result-object",function(e){var t=$(e.target);if("<i c"!=t.prop("outerHTML").substring(0,4)&&-1==t.prop("class").indexOf("waves-effect")){var a=$(this).attr("data-video-id"),n=$(this).attr("data-video-title"),i=$(this).attr("data-video-length");Tt.submitAndClose(a,n,i)}}),$(document).on("click","#submit-contact-form",function(e){e.preventDefault(),$("#contact-form").submit()}),$(document).on("submit","#contact-form",function(e){e.preventDefault();var t=$("#contact-form-message").val(),a=$("#contact-form-from").val();q.send_mail(a,t)}),$(document).on("click","#add-many",function(e){var t=$(this).attr("data-video-id"),a=$(this).attr("data-video-title"),n=$(this).attr("data-video-length");$(this).parent().parent().remove(),Tt.submit(t,a,n)}),$(document).on("click",".vote-container",function(e){if(!$(this).parent().hasClass("side_away")){var t=$(this).attr("data-video-id");J.vote(t,"pos")}}),$(document).on("click",".delete_button",function(e){var t=$(this).attr("data-video-id");J.vote(t,"del")}),$(document).on("click",".add-suggested",function(e){var t=$(this).attr("data-video-id"),a=$(this).attr("data-video-title"),n=$(this).attr("data-video-length"),i=$(this).attr("data-added-by");if(Tt.submit(t,a,n),"user"==i){Qe-=1,Qe<0&&(Qe=0);var s=Qe>9?"9+":Qe;$(".suggested-link span.badge.new.white").hasClass("hide")||0!=s||$(".suggested-link span.badge.new.white").addClass("hide"),$(".suggested-link span.badge.new.white").text(s)}$("#suggested-"+t).remove()}),$(document).on("click",".del_suggested",function(e){var t=$(this).attr("data-video-id");$("#suggested-"+t).remove()}),$(document).on("click",".del_user_suggested",function(e){var t=$(this).attr("data-video-id");$("#suggested-"+t).remove(),(Qe-=1)<0&&(Qe=0);var a=Qe>9?"9+":Qe;$(".suggested-link span.badge.new.white").hasClass("hide")||0!=a||$(".suggested-link span.badge.new.white").addClass("hide"),$(".suggested-link span.badge.new.white").text(a),J.vote(t,"del")}),$(document).on("click","#toast-container",function(){$(this).fadeOut(function(){$(this).remove()})}),$(document).on("click","#embed-area",function(){this.select()}),$(document).on("click",".brand-logo-navigate",function(e){e.preventDefault(),window.history.pushState("to the frontpage!","Title","/"),P()}),$(document).on("click","#player_bottom_overlay",function(){R.to_channel(Z.toLowerCase(),!1)}),$(document).keydown(function(e){if("/"!=window.location.pathname)if(91==e.keyCode||17==e.keyCode)Je=!0;else if(Je&&70==e.keyCode)Je=!1,We=!We,e.preventDefault(),We?($("#find_div").toggleClass("hide"),$("#find_input").focus(),at=""):($("#find_div").toggleClass("hide"),$("#find_input").val(""),$("#find_input").blur(),$(".highlight").removeClass("highlight"),nt=[],it=0,at="");else if(32!=e.keyCode||!$(".search-container").hasClass("hide")||"/"==window.location.pathname||$("#text-chat-input").is(":focus")||$("#password").is(":focus")||$("#user-pass-input").is(":focus")||$("#chan_thumbnail").is(":focus")||$("#chan_description").is(":focus")||$("#contact-form-from").is(":focus")||$("#contact-form-message").is(":focus")||$("#remote_channel").is(":focus")||$("#import").is(":focus")||$("#find_input").is(":focus")||$("#import_spotify").is(":focus"))Je=!1;else{if(1==xt.player.getPlayerState())return e.preventDefault(),xt.player.pauseVideo(),!1;if(2==xt.player.getPlayerState()||5==xt.player.getPlayerState())return e.preventDefault(),xt.player.playVideo(),!1}}),$(document).on("click","#close_find_form_button",function(e){e.preventDefault(),Je=!1,We=!1,$("#find_div").toggleClass("hide"),$("#find_input").val(""),$("#find_input").blur(),$(".highlight").removeClass("highlight"),nt=[],it=0,at=""}),$(document).keyup(function(e){91!=e.keyCode&&17!=e.keyCode||We||(Je=!1)}),$(document).on("submit","#find_form",function(e){if(e.preventDefault(),this.find_value.value!=at&&(at=this.find_value.value,nt=[],it=0),0==nt.length){var t=this;it=0,nt=$.map(ut,function(e,a){if(e.title.toLowerCase().indexOf(t.find_value.value.toLowerCase())>=0&&a!=ut.length-1)return a}),$("#num_found").text(it+1),$("#of_total_found").text(nt.length)}else it+=1,nt.length-1<it&&(it=0),$("#num_found").text(it+1),$("#of_total_found").text(nt.length);if(nt.length>0&&nt[it]!=ut.length-1){$(".highlight").removeClass("highlight");var a=Math.floor(nt[it]/J.can_fit);$($("#wrapper").children()[nt[it]]).addClass("highlight"),J.dynamicContentPageJumpTo(a)}else $(".highlight").removeClass("highlight"),q.log("none found")});var Ct={id:"",get_input:function(e){""===Ct.id?Ct.set_id(e.toLowerCase()):Ct.set_channel(e.toLowerCase())},set_id:function(e){Ct.id=e,$("#pausebutton_remote").attr("disabled",!1),$("#skipbutton_remote").attr("disabled",!1),$("#playbutton_remote").attr("disabled",!1),$("#skipbutton_remote").attr("disabled",!1),$("#remote_channel").val(""),$("#remote_channel").attr("placeholder","Change channel"),$("#remote_header").html("Controlling "+e),$("#volume-control-remote").css("display","inline-block"),$(".slider-vol-mobile").attr("style","display: inline-block !important")},set_channel:function(e){D.emit("id",{id:Ct.id,type:"channel",value:e})},play_remote:function(){D.emit("id",{id:Ct.id,type:"play",value:"mock"})},pause_remote:function(){D.emit("id",{id:Ct.id,type:"pause",value:"mock"})},skip_remote:function(){D.emit("id",{id:Ct.id,type:"skip",value:"mock"})},initiate_volume:function(){$("#volume-control-remote").slider({min:0,max:100,value:100,range:"min",animate:!0,stop:function(e,t){D.emit("id",{id:Ct.id,type:"volume",value:t.value}),q.log("volume")}})}},xt={loaded:!0,before_load:"",after_load:"",player:"",stopInterval:!1,fireplace:"",youtube_listener:function(e){var t;Ee&&e.np&&window.parentWindow&&window.parentOrigin&&(window.parentWindow.postMessage({type:"np",title:e.np[0].title},window.parentOrigin),ut.length>0&&xt.sendNext({title:ut[0].title,videoId:ut[0].id}));try{t=xt.player.getPlayerState()}catch(e){t=null}if((!Ze&&(null!=t||Ne)||Ze&&(null==t||Ne)||!Ze&&(null==t||Ne)||Ze&&-1==t)&&(!Ze||et!=Z)||Ze&&void 0==ft){et=Z,Ne=!1,xt.loaded=!1,q.log("--------youtube_listener--------"),q.log("Received: "),q.log(e),q.log("paused variable: "+_e),q.log("mobile_beginning variable: "+ct);try{q.log("getVideoUrl(): "+xt.player.getVideoUrl().split("v=")[1])}catch(e){}if(q.log("video_id variable: "+ft),q.log("---------------------------------"),e.np){if(_e)xt.getTitle(e.np[0].title,ue),q.mobilecheck()||xt.notifyUser(e.np[0].id,e.np[0].title),Fe||xt.stopVideo(),ft=e.np[0].id,se=e.conf[0],time=e.time,vt=time-se.startTime,_t=e.np[0].title,duration=e.np[0].duration,xt.setBGimage(ft);else if(!_e){void 0===$t?$t=e.np[0].id:$t!=ft&&($t=ft),ft=e.np[0].id,se=e.conf[0],time=e.time,vt=time-se.startTime,_t=e.np[0].title,duration=e.np[0].duration,ct&&q.mobilecheck()&&0===vt&&!Fe&&(vt=1);try{ut[0].id!=ft||ct||J.song_change(ut[0].added),It.fetchYoutubeSuggests(ft)}catch(e){}if(xt.getTitle(_t,ue),xt.setBGimage(ft),pe&&!window.MSStream)try{var a;try{a=xt.player.getVideoUrl().split("v=")[1]!=ft}catch(e){a=!0}(a||Fe)&&(xt.loadVideoById(ft,duration),q.mobilecheck()||xt.notifyUser(ft,_t),xt.seekTo(vt),_e&&!Fe&&xt.pauseVideo()),_e||(ct&&!Fe||xt.playVideo(),Be||xt.durationSetter()),(xt.player.getDuration()>vt||0===xt.player.getDuration()||Fe||xt.player.getCurrentTime()!=vt)&&xt.seekTo(vt),xt.after_load=ft,xt.loaded||setTimeout(function(){xt.loaded=!0},500)}catch(e){Fe&&(xt.loadVideoById(ft,duration),xt.seekTo(vt)),Be||Fe||xt.durationSetter()}else xt.getTitle(_t,ue)}}else{document.getElementById("song-title").innerHTML="Empty channel. Add some songs!",document.title="Zoff - the shared YouTube based radio",$("#channel-load").css("display","none"),window.MSStream||Fe||$("#player_overlay").hasClass("hide")&&$("#player_overlay").removeClass("hide");try{Fe||xt.stopVideo()}catch(e){}}}else Be||xt.durationSetter(),duration=xt.player.getDuration()},onPlayerStateChange:function(e){q.log("-------onPlayerStateChange------"),q.log("New state\nState: "),q.log(e);try{q.log("Duration: "+xt.player.getDuration(),"Current time: "+xt.player.getCurrentTime()),q.log("getVideoUrl(): "+xt.player.getVideoUrl().split("v=")[1])}catch(e){}switch(q.log("video_id variable: "+ft),q.log("---------------------------------"),e.data){case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.ENDED:we=!1,_e=!1,Ze?xt.playNext():D.emit("end",{id:ft,channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))});break;case YT.PlayerState.PLAYING:window.MSStream||($("#player").css("opacity","1"),q.mobilecheck()||$("#channel-load").css("display","none")),we=!0,beginning&&q.mobilecheck()&&!Fe&&(beginning=!1,ct=!1),Ee||"/"==window.location.pathname||Fe||q.addClass("#player_overlay","hide"),"/"!=window.location.pathname&&(1==document.getElementById("play").className.split(" ").length&&$("#play").toggleClass("hide"),2==document.getElementById("pause").className.split(" ").length&&$("#pause").toggleClass("hide")),_e&&!Ze&&(D.emit("pos",{channel:Z.toLowerCase(),pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))}),_e=!1);break;case YT.PlayerState.PAUSED:Fe||(beginning&&ct&&($("#playpause").css("visibility","visible"),$("#playpause").css("pointer-events","all"),$("#channel-load").css("display","none")),_e=!0,"/"!=window.location.pathname&&St.play_pause_show(),ct=!0);break;case YT.PlayerState.BUFFERING:}},playVideo:function(){Fe?(U.sendMessage("urn:x-cast:zoff.me",{type:"playVideo"}),chrome.cast.media.GenericMediaMetadata({metadataType:"GENERIC",title:_t,image:"https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"}),chrome.cast.Image("https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"),$("#pause").hasClass("hide")&&($("#play").toggleClass("hide"),$("#pause").toggleClass("hide"))):xt.player.playVideo()},pauseVideo:function(){Fe?(U.sendMessage("urn:x-cast:zoff.me",{type:"pauseVideo"}),$("#play").hasClass("hide")&&($("#play").toggleClass("hide"),$("#pause").toggleClass("hide"))):xt.player.pauseVideo()},seekTo:function(e){Fe?U.sendMessage("urn:x-cast:zoff.me",{type:"seekTo",seekTo:e}):Ze?xt.player.seekTo(0):xt.player.seekTo(e)},loadVideoById:function(e,t){Fe?(U.sendMessage("urn:x-cast:zoff.me",{type:"loadVideo",videoId:e,channel:Z.toLowerCase()}),chrome.cast.media.GenericMediaMetadata({metadataType:"GENERIC",title:_t,image:"https://img.youtube.com/vi/"+e+"/mqdefault.jpg"}),chrome.cast.Image("https://img.youtube.com/vi/"+e+"/mqdefault.jpg")):xt.player.loadVideoById({videoId:e,startSeconds:0,endSeconds:t})},stopVideo:function(){if(Fe)U.sendMessage("urn:x-cast:zoff.me",{type:"stopVideo"});else try{xt.player.stopVideo()}catch(e){}},setVolume:function(e){Fe?U.setVolume(e/100):xt.player.setVolume(e)},playNext:function(){var e=ut[0];ft=e.id,time=(new Date).getTime(),_t=e.title,duration=e.duration,xt.getTitle(_t,ue),xt.setBGimage(ft),Fe?(U.sendMessage("urn:x-cast:zoff.me",{type:"loadVideo",videoId:ft,channel:Z.toLowerCase()}),chrome.cast.media.GenericMediaMetadata({metadataType:"GENERIC",title:_t,image:"https://img.youtube.com/vi/"+ft+"/mqdefault.jpg"}),chrome.cast.Image("https://img.youtube.com/vi/"+ft+"/mqdefault.jpg")):xt.loadVideoById(ft,duration),J.channel_function({type:"song_change",time:time})},sendNext:function(e){Fe&&U.sendMessage("urn:x-cast:zoff.me",{type:"nextVideo",title:e.title,videoId:e.videoId}),Ee&&window.parentWindow&&window.parentOrigin&&window.parentWindow.postMessage({type:"nextVideo",title:e.title},window.parentOrigin)},getTitle:function(e,t){var a=decodeURIComponent(e);if("/"!=window.location.pathname){var n=document.getElementById("song-title"),i=document.getElementById("viewers");n.innerHTML=a,i.innerHTML="<i class='material-icons'>visibility</i> "+t,n.title=a,Fe&&($("#player_overlay").css("background","url(https://img.youtube.com/vi/"+ft+"/hqdefault.jpg)"),$("#player_overlay").css("background-position","center"),$("#player_overlay").css("background-size","100%"),$("#player_overlay").css("background-color","black"),$("#player_overlay").css("background-repeat","no-repeat"))}document.title=a+" • Zoff / "+Z},errorHandler:function(e){fe||(5==e.data||100==e.data||101==e.data||150==e.data?(curr_playing=xt.player.getVideoUrl().replace("https://www.youtube.com/watch?v=",""),D.emit("skip",{error:e.data,id:ft,pass:""==re?"":Y.crypt_pass(re),channel:Z.toLowerCase(),userpass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})):void 0!==ft&&xt.loadVideoById(ft,duration))},onPlayerReady:function(e){try{beginning=!0,pe=!0,window.MSStream||(q.mobilecheck()&&($("#playpause").css("visibility","hidden"),$("#playpause").css("pointer-events","none"),$("#player").css("opacity","1")),$(".video-container").removeClass("no-opacity"),$("#controls").css("opacity","1"),$(".playlist").css("opacity","1"),xt.loadVideoById(ft,duration),!Le||q.mobilecheck()&&!Fe||xt.playVideo(),Be||xt.durationSetter(),Ee?setTimeout(function(){xt.player.seekTo(vt),Le||(xt.player.pauseVideo(),St.play_pause_show())},1e3):xt.seekTo(vt)),xt.readyLooks(),St.initYoutubeControls(xt.player),St.initSlider(),xt.player.setVolume(Y.get_volume())}catch(e){}},readyLooks:function(){xt.setBGimage(ft)},setBGimage:function(e){if(void 0!==e&&!Ee){var t=new Image;t.onload=function(){var e=new ColorThief,a=e.getColor(t);"/"!=window.location.pathname&&(document.getElementById("main-container").style.backgroundColor=q.rgbToHsl(a,!0),$("meta[name=theme-color]").attr("content",q.rgbToHex(a[0],a[1],a[2])))},t.crossOrigin="Anonymous",t.src="https://zoff.me:8081/https://img.youtube.com/vi/"+e+"/mqdefault.jpg"}},set_width:function(e){if($(".video-container").width(e),!q.mobilecheck())if($(window).width()>769){var t=$(window).width()-$(".control-list").width()-$(".zbrand").outerWidth()-$(".brand-logo-navigate").outerWidth()-66;title_width=t,$(".title-container").width(title_width)}else $(".title-container").width("100%")},notifyUser:function(e,t){if(t=t.replace(/\\\'/g,"'").replace(/&quot;/g,"'").replace(/&amp;/g,"&"),"granted"===Notification.permission&&document.hidden&&!Ee){var a=new Notification("Now Playing",{body:t,icon:"https://i.ytimg.com/vi/"+e+"/mqdefault.jpg",iconUrl:"http://i.ytimg.com/vi/"+e+"/mqdefault.jpg"});a.onclick=function(e){window.focus(),this.cancel()},setTimeout(function(){a.close()},5e3)}},setup_all_listeners:function(){c(),l(),u(),h(),m()},onYouTubeIframeAPIReady:function(){xt.player=new YT.Player("player",{videoId:ft,playerVars:{rel:"0",wmode:"transparent",controls:"0",fs:"0",iv_load_policy:"3",theme:"light",color:"white",showinfo:0},events:{onReady:xt.onPlayerReady,onStateChange:xt.onPlayerStateChange,onError:xt.errorHandler}})},createFireplacePlayer:function(){xt.fireplace=new YT.Player("fireplace_player",{videoId:"L_LUpnjgPso",playerVars:{rel:"0",wmode:"transparent",controls:"0",fs:"0",iv_load_policy:"3",theme:"light",color:"white",showinfo:0},events:{onReady:xt.onFireplaceReady,onStateChange:xt.onFireplaceChange}})},onFireplaceReady:function(){xt.fireplace.playVideo()},onFireplaceChange:function(e){switch(e.data){case 0:xt.fireplace.seekTo(0),xt.fireplace.playVideo();break;case 2:xt.fireplace.playVideo()}},durationSetter:function(){try{ye||void 0===duration||(xt.stopInterval||(Be=!0),dMinutes=Math.floor(duration/60),dSeconds=duration-60*dMinutes,currDurr=void 0!==xt.player.getCurrentTime()?Math.floor(xt.player.getCurrentTime()):vt,currDurr>duration&&(currDurr=duration),minutes=Math.floor(currDurr/60),seconds=currDurr-60*minutes,document.getElementById("duration").innerHTML=q.pad(minutes)+":"+q.pad(seconds)+" <span id='dash'>/</span> "+q.pad(dMinutes)+":"+q.pad(dSeconds),per=100/duration*currDurr,per>=100?per=100:0===duration&&(per=0),Ee&&window.parentWindow&&window.parentOrigin&&window.parentWindow.postMessage({type:"duration",duration:xt.player.getCurrentTime(),full_duration:xt.player.getDuration(),percent:per},window.parentOrigin),me||$("#bar").width(per+"%"))}catch(e){}xt.stopInterval||setTimeout(xt.durationSetter,1e3)},loadPlayer:function(){if(1==$("script[src='https://www.youtube.com/iframe_api']").length)try{xt.onYouTubeIframeAPIReady()}catch(e){console.error("Seems YouTube iFrame script isn't correctly loaded. Please reload the page.")}else gt=document.createElement("script"),gt.src="https://www.youtube.com/iframe_api",ht=document.getElementsByTagName("script")[0],ht.parentNode.insertBefore(gt,ht)}},St={stopInterval:!1,initYoutubeControls:function(){q.mobilecheck()&&!window.MSStream&&$("#controls").appendTo("#playbar"),St.initControls()},initControls:function(){document.getElementById("volume-button").addEventListener("click",St.mute_video),document.getElementById("playpause").addEventListener("click",St.play_pause),document.getElementById("volume-button-overlay").addEventListener("click",St.mute_video),document.getElementById("playpause-overlay").addEventListener("click",St.play_pause),document.getElementById("fullscreen").addEventListener("click",St.fullscreen)},initSlider:function(){try{vol=Y.get_volume()}catch(e){}$("#volume").slider({min:0,max:100,value:vol,range:"min",animate:!0,slide:function(e,t){St.setVolume(t.value);try{Y.set_volume(t.value)}catch(e){}}}),St.choose_button(vol,!1)},fullscreen:function(){var e=document.getElementById("player"),t=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;t&&t.bind(e)()},play_pause:function(){Fe?St.play_pause_show():xt.player.getPlayerState()==YT.PlayerState.PLAYING?(xt.pauseVideo(),q.mobilecheck()&&!window.MSStream&&(document.getElementById("player").style.display="none",$(".video-container").toggleClass("click-through"),$(".page-footer").toggleClass("padding-bottom-extra"))):xt.player.getPlayerState()!=YT.PlayerState.PAUSED&&xt.player.getPlayerState()!==YT.PlayerState.ENDED&&xt.player.getPlayerState()!==YT.PlayerState.CUED||(xt.playVideo(),q.mobilecheck()&&!window.MSStream&&(document.getElementById("player").style.display="block",$(".video-container").toggleClass("click-through"),$(".page-footer").toggleClass("padding-bottom-extra")))},play_pause_show:function(){Fe?$("#play").hasClass("hide")?xt.pauseVideo():$("#pause").hasClass("hide")&&xt.playVideo():(1==document.getElementById("pause").className.split(" ").length&&($("#pause").toggleClass("hide"),$("#pause-overlay").toggleClass("hide")),2==document.getElementById("play").className.split(" ").length&&($("#play").toggleClass("hide"),$("#play-overlay").toggleClass("hide")))},settings:function(){$("#qS").toggleClass("hide")},changeQuality:function(e){xt.player.getPlaybackQuality!=e&&(xt.player.setPlaybackQuality(e),xt.player.getPlaybackQuality()),$("#qS").toggleClass("hide")},mute_video:function(){xt.player.isMuted()?(Fe&&U.sendMessage("urn:x-cast:zoff.me",{type:"unMute"}),xt.player.unMute(),St.choose_button(xt.player.getVolume(),!1)):(Fe&&U.sendMessage("urn:x-cast:zoff.me",{type:"mute"}),St.choose_button(0,!0),xt.player.mute())},setVolume:function(e){xt.setVolume(e),St.choose_button(e,!1),xt.player.isMuted()&&xt.player.unMute()},choose_button:function(e,t){t?(1==document.getElementById("v-full").className.split(" ").length&&($("#v-full").toggleClass("hide"),$("#v-full-overlay").toggleClass("hide")),1==document.getElementById("v-medium").className.split(" ").length&&($("#v-medium").toggleClass("hide"),$("#v-medium-overlay").toggleClass("hide")),1==document.getElementById("v-low").className.split(" ").length&&($("#v-low").toggleClass("hide"),$("#v-low-overlay").toggleClass("hide")),2==document.getElementById("v-mute").className.split(" ").length&&($("#v-mute").toggleClass("hide"),$("#v-mute-overlay").toggleClass("hide"))):e>=0&&e<=33?(1==document.getElementById("v-full").className.split(" ").length&&($("#v-full").toggleClass("hide"),$("#v-full-overlay").toggleClass("hide")),1==document.getElementById("v-medium").className.split(" ").length&&($("#v-medium").toggleClass("hide"),$("#v-medium-overlay").toggleClass("hide")),2==document.getElementById("v-low").className.split(" ").length&&($("#v-low").toggleClass("hide"),$("#v-low-overlay").toggleClass("hide")),1==document.getElementById("v-mute").className.split(" ").length&&($("#v-mute").toggleClass("hide"),$("#v-mute-overlay").toggleClass("hide"))):e>=34&&e<=66?(1==document.getElementById("v-full").className.split(" ").length&&($("#v-full").toggleClass("hide"),$("#v-full-overlay").toggleClass("hide")),2==document.getElementById("v-medium").className.split(" ").length&&($("#v-medium").toggleClass("hide"),$("#v-medium-overlay").toggleClass("hide")),1==document.getElementById("v-low").className.split(" ").length&&($("#v-low").toggleClass("hide"),$("#v-low-overlay").toggleClass("hide")),1==document.getElementById("v-mute").className.split(" ").length&&($("#v-mute").toggleClass("hide"),$("#v-mute-overlay").toggleClass("hide"))):e>=67&&e<=100&&(2==document.getElementById("v-full").className.split(" ").length&&($("#v-full").toggleClass("hide"),$("#v-full-overlay").toggleClass("hide")),1==document.getElementById("v-medium").className.split(" ").length&&($("#v-medium").toggleClass("hide"),$("#v-medium-overlay").toggleClass("hide")),1==document.getElementById("v-low").className.split(" ").length&&($("#v-low").toggleClass("hide"),$("#v-low-overlay").toggleClass("hide")),1==document.getElementById("v-mute").className.split(" ").length&&($("#v-mute").toggleClass("hide"),$("#v-mute-overlay").toggleClass("hide")))},playPause:function(){state=xt.player.getPlayerState(),button=document.getElementById("playpause"),state==YT.PlayerState.PLAYING?xt.pauseVideo():state==YT.PlayerState.PAUSED&&xt.playVideo()},volumeOptions:function(){Fe||(xt.player.isMuted()?(xt.player.unMute(),vol=xt.player.getVolume(),$("#volume").slider("value",xt.player.getVolume())):(xt.player.mute(),$("#volume").slider("value",0)))},hoverMute:function(e){vol=xt.player.getVolume()}},Tt={submitArray:[],submitArrayExpected:null,showSearch:function(){$("#search-wrapper").toggleClass("hide"),q.mobilecheck()&&$(".search_input").focus(),$("#song-title").toggleClass("hide"),$("#results").empty(),"close"==$("#search-btn i").html()?$("#search-btn i").html("search"):$("#search-btn i").html("close"),$("#search").focus()},search:function(e,t,a){if(void 0!==lt&&void 0!==rt||(lt=$("#temp-results-container"),rt=$("#empty-results-container").html()),$(".search_results").html(""),""!==e){ne=!0;var n=encodeURIComponent(e),i="https://www.googleapis.com/youtube/v3/search?key="+ae+"&videoEmbeddable=true&part=id&fields=items(id)&type=video&order=viewCount&safeSearch=none&maxResults=25";i+="&q="+n,le&&(i+="&videoCategoryId=10");var s="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+ae+"&id=";if(a)var i="https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=25&relatedToVideoId="+n+"&type=video&key="+ae,s="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+ae+"&id=";q.contains($(".search_loader_spinner").attr("class").split(" "),"active")||$(".search_loader_spinner").addClass("active"),q.contains($("#results").attr("class").split(" "),"hide")&&$("#results").removeClass("hide"),$.ajax({type:"GET",url:i,dataType:"jsonp",success:function(a){0===a.items.length?($("<div style='display:none;' id='mock-div'>"+rt+"</div>").appendTo($("#results")).show("blind",83.33),q.contains($(".search_loader_spinner").attr("class").split(" "),"active")&&$(".search_loader_spinner").removeClass("active")):a.items&&($.each(a.items,function(e,t){s+=t.id.videoId+","}),$.ajax({type:"GET",url:s,dataType:"jsonp",success:function(a){var n="",i=$(lt);$.each(a.items,function(e,t){var a=t.contentDetails.duration;if(secs=Tt.durationToSeconds(a),!longsongs||secs<720){mt=t.snippet.title,enc_title=mt,pt=t.id,a=a.replace("PT","").replace("H","h ").replace("M","m ").replace("S","s"),thumb=t.snippet.thumbnails.medium.url;var s=i;s.find(".search-title").text(mt),s.find(".result_info").text(a),s.find(".thumb").attr("src",thumb),s.find("#add-many").attr("data-video-id",pt),s.find("#add-many").attr("data-video-title",enc_title),s.find("#add-many").attr("data-video-length",secs),s.find("#temp-results").attr("data-video-id",pt),s.find("#temp-results").attr("data-video-title",enc_title),s.find("#temp-results").attr("data-video-length",secs),s.find(".open-externally").attr("href","https://www.youtube.com/watch?v="+pt),void 0!=s.html()&&(n+=s.html())}}),n.length>0?($("<div style='display:none;' id='mock-div'>"+n+"</div>").appendTo($("#results")).show("blind",83.33*(a.items.length-1)),q.contains($(".search_loader_spinner").attr("class").split(" "),"active")&&$(".search_loader_spinner").removeClass("active"),$(".add-many").click(function(e){return e.preventDefault(),e.stopPropagation(),!1})):t?($("<div style='display:none;' id='mock-div'>"+rt+"</div>").appendTo($("#results")).show("blind",83.33),q.contains($(".search_loader_spinner").attr("class").split(" "),"active")&&$(".search_loader_spinner").removeClass("active")):Tt.search(e,!0)}}))}})}else $(".main").removeClass("blurT"),$("#controls").removeClass("blurT"),$(".main").removeClass("clickthrough")},backgroundSearch:function(e,t,a,n,i){var s=encodeURIComponent(e+" "+t),o="https://www.googleapis.com/youtube/v3/search?key="+ae+"&videoEmbeddable=true&part=id,snippet&fields=items(id,snippet)&type=video&order=relevance&safeSearch=none&maxResults=10&videoCategoryId=10";o+="&q="+s;var l="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+ae+"&id=";t=t.split(" ");var r=e.split("-");r=r.join(" ").split(" "),$.ajax({type:"GET",url:o,dataType:"jsonp",success:function(i){if(0===i.items.length){Tt.readySubmit(!1,{totalLength:n-1}),q.log("------------------------------"),q.log("NO MATCH FOR:"),q.log("Spotify title: "+e+" "+t.join(" ")),q.log("Spotify length: "+a),q.log("------------------------------");var s=$("<div>"+Oe+"</div>");s.find(".extra-add-text").text(e+" - "+t.join(" ")),s.find(".extra-add-text").attr("title",e+" - "+t.join(" ")),s.find(".extra-button-search").attr("data-text",e+" - "+t.join(" ")),$(".not-imported-container").append(s.html()),$(".not-imported").removeClass("hide")}else i.items.length>0&&($.each(i.items,function(e,t){l+=t.id.videoId+","}),$.ajax({type:"GET",url:l,dataType:"jsonp",success:function(i){if(i.items.length>0){var s=!1;if($.each(i.items,function(a,i){var o=Tt.durationToSeconds(i.contentDetails.duration),l=!1;if($.each(r,function(a,n){return-1!=i.snippet.title.toLowerCase().indexOf(n.toLowerCase())&&-1==i.snippet.title.toLowerCase().indexOf("cover")&&-1==e.toLowerCase().indexOf("cover")&&(-1==i.snippet.title.toLowerCase().indexOf("remix")&&-1==e.toLowerCase().indexOf("remix")||-1!=i.snippet.title.toLowerCase().indexOf("remix")&&-1!=e.toLowerCase().indexOf("remix")||-1!=i.snippet.title.toLowerCase().indexOf(t[0].toLowerCase())||-1!=i.snippet.channelTitle.toLowerCase().indexOf(t[0].toLowerCase())||-1!=i.snippet.channelTitle.toLowerCase().indexOf("vevo"))||(l=!0),!1}),!l)return s=!0,Tt.readySubmit(!0,{id:i.id,title:i.snippet.title,duration:o,totalLength:n-1}),!1}),!s){Tt.readySubmit(!1,{totalLength:n-1}),q.log("------------------------------"),q.log("NO MATCH FOR:"),q.log("Spotify title: "+e+" "+t.join(" ")),q.log("Spotify length: "+a),q.log("------------------------------");var o=$("<div>"+Oe+"</div>");o.find(".extra-add-text").text(e+" - "+t.join(" ")),o.find(".extra-add-text").attr("title",e+" - "+t.join(" ")),o.find(".extra-button-search").attr("data-text",e+" - "+t.join(" ")),$(".not-imported-container").append(o.html()),$(".not-imported").removeClass("hide")}}}}))}})},readySubmit:function(e,t){null===Tt.submitArrayExpected&&(Tt.submitArrayExpected=t.totalLength),e?Tt.submitArray.push(t):Tt.submitArrayExpected-=1,Tt.submitArray.length-1==Tt.submitArrayExpected&&($.each(Tt.submitArray,function(e,t){Tt.submit(t.id,t.title,t.duration,!0,e,Tt.submitArray.length-1)}),document.getElementById("import_spotify").disabled=!1,$("#import_spotify").removeClass("hide"),$("#playlist_loader_spotify").addClass("hide"),Tt.submitArray=[],Tt.submitArrayExpected=null)},submitAndClose:function(e,t,a){Tt.submit(e,t,a,!1,0,1),$("#results").html(""),Tt.showSearch(),document.getElementById("search").value="",$("#results").html="",$(".main").removeClass("blurT"),$("#controls").removeClass("blurT"),$(".main").removeClass("clickthrough")},importPlaylist:function(e,t){token="";var a,n;void 0!==t&&(token="&pageToken="+t),playlist_url="https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&maxResults=49&key="+ae+"&playlistId="+e+token,He?(n="html",a={"Content-Type":"application/json",Authorization:"Bearer "+Ue.access_token}):(a={},n="jsonp"),$.ajax({type:"GET",url:playlist_url,dataType:n,headers:a,success:function(a){if(a.error)if("playlistItemsNotAccessible"==a.error.errors[0].reason){var n=S(29);window.callback=function(a){Ue=a,Ue.state==n?(He=!0,setTimeout(function(){He=!1,Ue={}},1e3*Ue.expires_in),Tt.importPlaylist(e,t)):(Ue="",console.error("Nonce doesn't match")),youtube_window.close(),window.callback=""},youtube_window=window.open("/o_callback#youtube=true&nonce="+n,"","width=600, height=600")}else q.log(a.error),document.getElementById("import").disabled=!1,$("#playlist_loader").addClass("hide"),$("#import").removeClass("hide"),A(),Materialize.toast("It seems you've entered a invalid url.",4e3);else{var i="";"string"==typeof a&&(a=$.parseJSON(a)),$.each(a.items,function(e,t){i+=t.contentDetails.videoId+","}),Tt.addVideos(i,!0),a.nextPageToken&&Tt.importPlaylist(e,a.nextPageToken),document.getElementById("import").value=""}}})},importSpotifyPlaylist:function(e){$.ajax({url:e,headers:{Authorization:"Bearer "+De.access_token},success:function(e){$.each(e.items,function(t,a){Tt.backgroundSearch(a.track.name,a.track.artists.map(function(e){return e.name}).join(" "),Math.floor(a.track.duration_ms/1e3),e.total,t+e.offset)}),e.next&&Tt.importSpotifyPlaylist(e.next)},error:function(){document.getElementById("import_spotify").disabled=!1,$("#import_spotify").removeClass("hide"),$("#playlist_loader_spotify").addClass("hide"),A(),Materialize.toast("It seems you've entered a invalid url.",4e3)}})},addVideos:function(e,t){var a="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key=AIzaSyBSxgDrvIaKR2c_MK5fk6S01Oe7bd_qGd8&id=";a+=e,$.ajax({type:"POST",url:a,dataType:"jsonp",success:function(e){var a=0,n=[];$.each(e.items,function(e,i){var s=Tt.durationToSeconds(i.contentDetails.duration);(!longsongs||s<720)&&(enc_title=i.snippet.title,a+=1,n.push({id:i.id,enc_title:enc_title,duration:s,playlist:t}))}),$.each(n,function(e,t){Tt.submit(t.id,t.enc_title,t.duration,t.playlist,e,a)})}})},submit:function(e,t,a,n,i,s){if(Ze&&document.getElementsByName("addsongs")[0].checked&&document.getElementsByName("addsongs")[0].disabled){var o=[];o=$.map(ut,function(t,a){if(t.id==e)return a}),0==o.length?J.channel_function({type:"added",value:{added:(new Date).getTime()/1e3,guids:[1],id:e,title:t,duration:a,playlist:!1,now_playing:!1,votes:1}}):J.vote(e,"pos")}else D.emit("add",{id:e,title:t,adminpass:""==re?"":Y.crypt_pass(re),list:Z.toLowerCase(),duration:a,playlist:n,num:i,total:s,pass:Ee?"":Y.crypt_pass(Y.get_userpass(Z.toLowerCase()))})},durationToSeconds:function(e){var t=e.match(ie);return hours=parseInt(t[12])||0,minutes=parseInt(t[14])||0,seconds=parseInt(t[16])||0,60*hours*60+60*minutes+seconds}},It={catchUserSuggests:function(e,t){Qe+=t?1:e.length;var a=Qe>9?"9+":Qe;if($(".suggested-link span.badge.new.white").hasClass("hide")&&Qe>0&&$(".suggested-link span.badge.new.white").removeClass("hide"),$(".suggested-link span.badge.new.white").text(a),t)It.createSuggested(e);else for(var n in e)It.createSuggested(e[n]);It.checkUserEmpty()},createSuggested:function(e){var t=q.secondsToOther(e.duration),a=e.id,n=e.title,i=J.generateSong({id:a,title:n,length:e.duration,duration:t},!1,!1,!1,!0);$("#user-suggest-html").append(i)},fetchYoutubeSuggests:function(e){var t="https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId="+e+"&type=video&key="+ae,a="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+ae+"&id=";$.ajax({type:"GET",url:t,dataType:"jsonp",success:function(e){$.each(e.items.slice(0,5),function(e,t){a+=t.id.videoId+","}),$.ajax({type:"GET",url:a,dataType:"jsonp",success:function(e){$("#suggest-song-html").empty(),$.each(e.items,function(e,t){var a=t.contentDetails.duration,n=Tt.durationToSeconds(a);a=q.secondsToOther(Tt.durationToSeconds(a));var i=t.id,s=t.snippet.title;$("#suggest-song-html").append(J.generateSong({id:i,title:s,length:n,duration:a},!1,!1,!1))})}})}})},checkUserEmpty:function(){0===$("#user-suggest-html").children().length?q.contains($("#user_suggests").attr("class").split(" "),"hide")||$("#user_suggests").addClass("hide"):$("#user_suggests").removeClass("hide")}}}();